"use strict";(self.webpackChunkswayswap_demo=self.webpackChunkswayswap_demo||[]).push([[630],{9909:function(e,n,a){a.d(n,{_:function(){return Q},M:function(){return K}});var t=a(1413),s=a(885),r=a(4925),o=a(612),i=a(3580),l=a(2791),c=a(948),u=a(9478),d=a(3853),f=a(5479),m=a(6231),x=a.n(m),h=a(3426),g=a(401),v=a(1694),p=a.n(v),y=a(3599),b=a(184),j=["className"],w="appearance-none w-full rounded-md bg-gray-700 px-4 py-2 focus-ring text-gray-100",N=(0,l.forwardRef)((function(e,n){var a=e.className,s=(0,r.Z)(e,j),o=(0,l.useRef)(null),i=(0,g.E)(s,o).inputProps;return(0,b.jsx)("input",(0,t.Z)({ref:(0,y.Z)([o,n]),className:p()(a,w)},i))})),I=a(2982),Z=a(7965),B=a(6367),S=a(686),C=["className","onAction","focusOnMount"];function E(e){var n=e.item,a=e.state,s=e.onAction,r=e.className,o=(0,l.useRef)(null),i=a.disabledKeys.has(n.key),c=a.selectionManager.focusedKey===n.key,u=(0,Z.iX)({key:n.key,isDisabled:i,onAction:s},a,o).menuItemProps;return(0,b.jsx)("li",(0,t.Z)((0,t.Z)({},u),{},{ref:o,className:r,"data-focused":c,children:n.rendered}))}var k=function(e){var n=e.className,a=e.onAction,s=e.focusOnMount,o=(0,r.Z)(e,C),i=(0,B.D)((0,t.Z)((0,t.Z)({},o),{},{selectionMode:"none"})),c=(0,l.useRef)(null),u=(0,Z.H9)(o,i,c).menuProps;return(0,l.useEffect)((function(){var e;s&&(null===(e=c.current)||void 0===e||e.focus())}),[]),(0,b.jsx)("ul",(0,t.Z)((0,t.Z)({},u),{},{ref:c,className:n,children:(0,I.Z)(i.collection).map((function(e){return(0,b.jsx)(E,{className:e.props.className,item:e,state:i,onAction:a},e.key)}))}))},A=S.ck;k.Item=A;var P="py-2 px-6 flex items-center gap-3 border-t border-gray-700\n  hover:bg-gray-700/50 hover:cursor-pointer focus-ring",_="px-6 py-4 border-t border-gray-700";function D(e){var n=e.onSelect,a=(0,l.useState)(""),t=(0,s.Z)(a,2),r=t[0],o=t[1];var i=f.Z.filter((function(e){var n;return Boolean(r.length)?null===(n=e.name)||void 0===n?void 0:n.toLowerCase().includes(r.toLocaleLowerCase()):e})),c=Boolean(i.length);return(0,b.jsxs)("div",{children:[(0,b.jsxs)("header",{className:"py-4 px-6 pb-5",children:[(0,b.jsx)("h2",{className:"text-gray-50 text-lg mb-3",children:"Select a token"}),(0,b.jsx)(N,{type:"text",placeholder:"Search by name...",value:r,onChange:o})]}),c?(0,b.jsx)(k,{onAction:function(e){return null===n||void 0===n?void 0:n(e)},className:"pb-2",focusOnMount:!0,children:i.map((function(e){return(0,b.jsxs)(k.Item,{className:P,children:[(0,b.jsx)("img",{className:"rounded-full border-none ml-1",src:"/".concat(x()("/swayswap",e.img)),alt:e.name,height:30,width:30}),(0,b.jsxs)("div",{className:"flex flex-col",children:[(0,b.jsx)("div",{className:"text-gray-50",children:e.symbol}),(0,b.jsx)("div",{className:"text-sm",children:e.name})]})]},e.assetId)}))}):(0,b.jsx)("div",{className:_,children:"\ud83d\ude22 Oops, no token found!"})]})}var M=a(4243),F="flex1";function R(e){var n=e.value,a=(e.onChange,e.isReadOnly),r=(0,l.useState)(null),o=(0,s.Z)(r,2),i=o[0],c=o[1],u=(0,M.E)();return(0,l.useEffect)((function(){if(!n)return c(null);c(n)}),[n]),(0,b.jsxs)("div",{className:F,children:[(0,b.jsxs)(h.z,(0,t.Z)((0,t.Z)({},u.openButtonProps),{},{size:"md",className:"coin-selector",isDisabled:a,children:[i&&i.img&&(0,b.jsx)("img",{className:"rounded-full border-none ml-1",src:"/".concat(x()("/swayswap",i.img)),alt:i.name,height:20,width:20}),(0,b.jsx)("div",{className:"ml-2",children:null===i||void 0===i?void 0:i.name}),!a&&(0,b.jsx)(d.bTu,{className:"text-gray-500"})]})),(0,b.jsx)(M.V,(0,t.Z)((0,t.Z)({},u.dialogProps),{},{children:(0,b.jsx)(M.V.Content,{children:(0,b.jsx)(D,{onSelect:function(e){u.close(),c(f.Z.find((function(n){return n.assetId===e})))}})})}))]})}var H=a(1933),O=a(3246);var T=["amount","onChange","isReadOnly","showBalance","coin","gasFee","onInput"],z="flex bg-gray-700 rounded-2xl p-2 border border-gray-700",$="mx-2 h-10 bg-transparent placeholder:text-gray-300 outline-none text-xl flex items-center",q="flex flex-1 flex-col items-end",L="text-xs py-0 px-1 h-auto bg-primary-800/60 text-primary-500 hover:bg-primary-800",U=function(e){if(""!==e){var n=function(e){return"."===e?"0.":e}(e);return(0,i.parseUnits)(n,u.cS).toBigInt()}return(0,o.Gh)(0)},V=function(e){return null!=e?(0,i.formatUnits)(e,u.cS):e?void 0:""};function K(e){var n=e.amount,a=e.onChange,o=e.isReadOnly,i=e.showBalance,c=void 0===i||i,u=e.coin,d=e.gasFee,f=e.onInput,m=(0,r.Z)(e,T),x=(0,l.useState)(null),h=(0,s.Z)(x,2),g=h[0],v=h[1],p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=(0,O.Os)();return(0,H.useQuery)("AssetsPage-balances",(function(){return n.getBalances()}),e)}({enabled:c}),y=p.data,b=null===y||void 0===y?void 0:y.find((function(e){return e.assetId===(null===u||void 0===u?void 0:u.assetId)}));function j(){var e=(null===b||void 0===b?void 0:b.amount)||BigInt(0);return e>BigInt(0)?e-(d||BigInt(0)):e}return(0,l.useEffect)((function(){null!=n&&v(n)}),[n]),{amount:g,formatted:V(g),setAmount:v,getInputProps:function(){return(0,t.Z)((0,t.Z)({},m),{},{coin:u,isReadOnly:o,value:V(g),displayType:o?"text":"input",onInput:f,onChange:function(e){if(!o){var n=""!==e?U(e):null;"function"===typeof a?a(n):v(n)}},isAllowed:function(e){var n=e.value;return U(n)<=0x10000000000000000},setMaxBalance:function(){null===f||void 0===f||f(),v(j())},balance:V((null===b||void 0===b?void 0:b.amount)||BigInt(0)),showBalance:c,showMaxButton:c})},hasEnoughBalance:j()>=(g||BigInt(0))}}var Q=(0,l.forwardRef)((function(e,n){var a=e.value,t=e.displayType,r=e.onChange,o=e.coin,i=e.isAllowed,d=e.onChangeCoin,f=e.onInput,m=e.isReadOnly,x=e.coinSelectorDisabled,g=e.showMaxButton,v=e.showBalance,p=e.setMaxBalance,y=e.balance,j=e.autoFocus,w=(0,l.useState)(a),N=(0,s.Z)(w,2),I=N[0],Z=N[1];return(0,l.useEffect)((function(){a&&Z(a)}),[a]),(0,b.jsxs)("div",{className:z,children:[(0,b.jsx)(c.Z,{autoFocus:j,getInputRef:n,allowNegative:!1,defaultValue:a,value:I,displayType:t,isAllowed:i,onChange:function(e){null===r||void 0===r||r(e.target.value),Z(e.target.value)},decimalScale:u.cS,placeholder:"0",className:$,thousandSeparator:!1,onInput:f}),(0,b.jsxs)("div",{className:q,children:[(0,b.jsx)(R,{value:o,onChange:d,isReadOnly:m||x}),(v||g)&&(0,b.jsxs)("div",{className:"flex items-center gap-2 mt-2",children:[v&&(0,b.jsxs)("div",{className:"text-xs text-gray-400",children:["Balance: ",y]}),g&&(0,b.jsx)(h.z,{size:"sm",onPress:p,className:L,variant:"ghost",children:"Max"})]})]})]})}))},9385:function(e,n,a){a.d(n,{$:function(){return s}});var t=a(184);function s(){return(0,t.jsxs)("svg",{className:"-ml-1 h-5 w-5 animate-spin text-primary-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,t.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,t.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}},5479:function(e,n,a){var t=a(9478),s=[{name:"Ether",symbol:"ETH",assetId:"0x0000000000000000000000000000000000000000000000000000000000000000",img:"/icons/eth.svg"},{name:"DAI",symbol:"DAI",assetId:t.Bb,img:"/icons/dai.svg"},{name:"Sway",symbol:"SWAY",assetId:t.p_,img:"/icons/sway.svg"}];n.Z=s},7630:function(e,n,a){a.r(n),a.d(n,{default:function(){return S}});var t=a(1413),s=a(5861),r=a(885),o=a(7757),i=a.n(o),l=a(612),c=a(1933),u=a(6871),d=a(2791),f=a(1694),m=a.n(f),x=a(6140),h=a(5479),g=a(3426),v=a(9909),p=a(9478),y=a(3580),b=a(6861),j=a(7425),w=a(9385),N=a(3246),I=a(184),Z="font-mono my-4 px-4 py-3 text-sm text-slate-400 decoration-1 border border-dashed border-white/10 rounded-lg";function B(e){var n=e.loading,a=e.step,t=e.steps;return(0,I.jsx)("ul",{className:"w-full rounded-lg border border-gray-600 text-gray-900",children:t.map((function(e,s){return(0,I.jsxs)("li",{className:m()("space-between flex w-full items-center border-b border-gray-600 px-6 py-2 text-white",{"rounded-t-lg":0===s,"bg-primary-500":a===s&&n,"rounded-b-lg":s===t.length}),children:[(0,I.jsx)("div",{className:"flex-1",children:e}),a===s&&n&&(0,I.jsx)(w.$,{}),a>s&&(0,I.jsx)(j.xuy,{})]},s)}))})}function S(){var e=(0,N.cq)(),n=(0,u.s0)(),a=(0,d.useState)([h.Z[0],h.Z[1]]),o=(0,r.Z)(a,2),f=(0,r.Z)(o[0],2),m=f[0],j=f[1],w=o[1],S=(0,d.useState)(0),C=(0,r.Z)(S,2),E=C[0],k=C[1],A=(0,c.useQuery)("PoolPage-poolInfo",(function(){return e.callStatic.get_info()})).data,P=(0,v.M)({coin:m,onChangeCoin:function(e){return w([e,j])},gasFee:BigInt(1)}),_=(0,v.M)({coin:j,onChangeCoin:function(e){return w([e,j])}}),D=(0,c.useMutation)((0,s.Z)(i().mark((function n(){var a,t;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(a=P.amount,t=_.amount,a&&t){n.next=4;break}return n.abrupt("return");case 4:return n.next=6,e.functions.deposit({forward:[a,m.assetId]});case 6:return k((function(e){return e+1})),n.next=9,e.functions.deposit({forward:[t,j.assetId]});case 9:return k((function(e){return e+1})),n.next=12,e.functions.add_liquidity(1,t,1e3,{variableOutputs:1});case 12:k((function(e){return e+1}));case 13:case"end":return n.stop()}}),n)}))),{onSuccess:function(){x.ZP.success("New pool created!"),n(b.i.wallet)},onError:function(e){var n,a=null===e||void 0===e||null===(n=e.response)||void 0===n?void 0:n.errors;a.length&&"enough coins could not be found"===a[0].message&&x.ZP.error("Not enough balance in your wallet to create this pool.")},onSettled:function(){k(0)}});return D.isLoading?(0,I.jsx)("div",{className:"mt-6 mb-8 flex justify-center",children:(0,I.jsx)(B,{steps:["Deposit: ".concat(m.name),"Deposit: ".concat(j.name),"Provide liquidity","Done"],step:E,loading:D.isLoading,coinFrom:m,coinTo:j})}):(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)("div",{className:"mt-6 mb-4",children:(0,I.jsx)(v._,(0,t.Z)((0,t.Z)({},P.getInputProps()),{},{autoFocus:!0,coinSelectorDisabled:!0}))}),(0,I.jsx)("div",{className:"mb-6",children:(0,I.jsx)(v._,(0,t.Z)((0,t.Z)({},_.getInputProps()),{},{coinSelectorDisabled:!0}))}),A?(0,I.jsxs)("div",{className:Z,children:[(0,I.jsx)("h4",{className:"text-white mb-2 font-bold",children:"Reserves"}),(0,I.jsxs)("div",{className:"flex",children:[(0,I.jsxs)("div",{className:"flex flex-col flex-1",children:[(0,I.jsxs)("span",{children:["ETH:"," ",(0,y.formatUnits)(A.eth_reserve,p.cS).toString()]}),(0,I.jsxs)("span",{children:["DAI:"," ",(0,y.formatUnits)(A.token_reserve,p.cS).toString()]})]}),A.eth_reserve>0&&A.token_reserve>0?(0,I.jsxs)("div",{className:"flex flex-col",children:[(0,I.jsx)("span",{children:(0,I.jsxs)(I.Fragment,{children:["ETH/DAI:"," ",+((0,l.He)(p.$g*A.eth_reserve)/(0,l.He)(A.token_reserve)/(0,l.He)(p.$g)).toFixed(6)]})}),(0,I.jsx)("span",{children:(0,I.jsxs)(I.Fragment,{children:["DAI/ETH:"," ",+((0,l.He)(p.$g*A.token_reserve)/(0,l.He)(A.eth_reserve)/(0,l.He)(p.$g)).toFixed(6)]})})]}):null]})]}):null,(0,I.jsx)(g.z,{isDisabled:!P.hasEnoughBalance||!_.hasEnoughBalance,isFull:!0,size:"lg",variant:"primary",onPress:function(){var e=P.amount,n=_.amount;if(!e)throw new Error('"fromAmount" is required');if(!n)throw new Error('"toAmount" is required');if(!P.hasEnoughBalance)throw new Error("Insufficient ".concat(m.name," balance"));if(!_.hasEnoughBalance)throw new Error("Insufficient ".concat(j.name," balance"));D.mutate()},children:P.hasEnoughBalance?_.hasEnoughBalance?"Confirm":"Insufficient ".concat(j.name," balance"):"Insufficient ".concat(m.name," balance")})]})}}}]);
//# sourceMappingURL=630.c0ee98fb.chunk.js.map