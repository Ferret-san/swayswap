{"version":3,"file":"static/js/801.1f57a40c.chunk.js","mappings":"wVAKMA,EACE,mFAOKC,GAAwBC,EAAAA,EAAAA,aACnC,WAA0BC,GAAS,IAAhCC,EAA+B,EAA/BA,UAAcC,GAAiB,YAC1BC,GAAWC,EAAAA,EAAAA,QAAgC,MAC3CC,GAAeC,EAAAA,EAAAA,GAAaJ,EAAOC,GAAnCE,WACN,OACE,0BACEL,KAAKO,EAAAA,EAAAA,GAAU,CAACJ,EAAUH,IAC1BC,UAAWO,GAAAA,CAAGP,EAAWJ,IACrBQ,O,iFCRZ,SAASI,EAAT,GAAwE,IAApDC,EAAmD,EAAnDA,KAAMC,EAA6C,EAA7CA,MAAOC,EAAsC,EAAtCA,SAAUX,EAA4B,EAA5BA,UAEnCD,GAAMI,EAAAA,EAAAA,QAA6B,MACnCS,EAAaF,EAAMG,aAAaC,IAAIL,EAAKM,KACzCC,EAAYN,EAAMO,iBAAiBC,aAAeT,EAAKM,IAErDI,GAAkBC,EAAAA,EAAAA,IACxB,CACEL,IAAKN,EAAKM,IACVH,WAAAA,EACAD,SAAAA,GAEFD,EACAX,GAPMoB,cAUR,OACE,iCACMA,GADN,IAEEpB,IAAKA,EACLC,UAAWA,EACX,eAAcgB,EAJhB,SAMGP,EAAKY,YAeL,IAAMC,EAAsB,SAAC,GAK7B,IAJLtB,EAII,EAJJA,UACAW,EAGI,EAHJA,SACAY,EAEI,EAFJA,aACGtB,GACC,YAEES,GAAQc,EAAAA,EAAAA,IAAa,kBAAKvB,GAAN,IAAawB,cAAe,UAGhD1B,GAAMI,EAAAA,EAAAA,QAAgC,MACpCuB,GAAcC,EAAAA,EAAAA,IAAQ1B,EAAOS,EAAOX,GAApC2B,UASR,OAPAE,EAAAA,EAAAA,YAAU,WACW,IAAD,EAAdL,IACF,UAAAxB,EAAI8B,eAAJ,SAAaC,WAGd,KAGD,iCAAQJ,GAAR,IAAmB3B,IAAKA,EAAKC,UAAWA,EAAxC,UACG,OAAIU,EAAMqB,YAAYC,KAAI,SAACvB,GAAD,OACzB,SAACD,EAAD,CACER,UAAWS,EAAKR,MAAMD,UAEtBS,KAAMA,EACNC,MAAOA,EACPC,SAAUA,GAHLF,EAAKM,YAWdkB,EAAaC,EAAAA,GACnBZ,EAAKY,KAAOD,EClFZ,IAAMrC,EAEK,qHAFLA,EAIM,qCAOL,SAASuC,EAAT,GAA4D,IAAjCC,EAAgC,EAAhCA,SAChC,GAA0BC,EAAAA,EAAAA,UAAS,IAAnC,eAAOC,EAAP,KAAcC,EAAd,KAOA,IAAMC,EAAWC,EAAAA,EAAAA,QALjB,SAAwBC,GAAa,IAAD,EAClC,OAAKC,QAAQL,EAAMM,QACnB,UAAOF,EAAKG,YAAZ,aAAO,EAAWC,cAAcC,SAAST,EAAMU,qBADZN,KAK/BO,EAAaN,QAAQH,EAASI,QAEpC,OACE,4BACE,oBAAQ5C,UAAU,iBAAlB,WACE,eAAIA,UAAU,4BAAd,6BACA,SAACH,EAAD,CACEqD,KAAK,OACLC,YAAY,oBACZb,MAAOA,EACPc,SAAUb,OAGbU,GACC,SAAC3B,EAAD,CACEX,SAAU,SAACI,GAAD,cAASqB,QAAT,IAASA,OAAT,EAASA,EAAWrB,IAC9Bf,UAAU,OACVuB,cAAY,EAHd,SAKGiB,EAASR,KAAI,SAACU,GAAD,OACZ,UAACpB,EAAKY,KAAN,CAA8BlC,UAAWJ,EAAzC,WACE,gBACEI,UAAU,gCACVqD,IAAKX,EAAKY,IACVC,IAAKb,EAAKG,KACVW,OAAQ,GACRC,MAAO,MAET,iBAAKzD,UAAU,gBAAf,WACE,gBAAKA,UAAU,eAAf,SAA+B0C,EAAKgB,UACpC,gBAAK1D,UAAU,UAAf,SAA0B0C,EAAKG,YAVnBH,EAAKiB,eAgBzB,gBAAK3D,UAAWJ,EAAhB,mD,cCrDFA,EACa,QASZ,SAASgE,EAAT,GAIgB,IAHrBtB,EAGoB,EAHpBA,MAEAuB,GACoB,EAFpBT,SAEoB,EADpBS,YAEA,GAAgCxB,EAAAA,EAAAA,UAAsB,MAAtD,eAAOyB,EAAP,KAAiBC,EAAjB,KACMC,GAASC,EAAAA,EAAAA,KAYf,OAVArC,EAAAA,EAAAA,YAAU,WACR,IAAKU,EAAO,OAAOyB,EAAY,MAC/BA,EAAYzB,KACX,CAACA,KAQF,iBAAKtC,UAAWJ,EAAhB,WACE,UAACsE,EAAA,GAAD,kBACMF,EAAOG,iBADb,IAEEC,KAAK,KACLpE,UAAU,gBACVY,WAAYiD,EAJd,UAMGC,GAAYA,EAASR,MACpB,gBACEtD,UAAU,gCACVqD,IAAKS,EAASR,IACdC,IAAKO,EAASjB,KACdW,OAAQ,GACRC,MAAO,MAGX,gBAAKzD,UAAU,OAAf,gBAAuB8D,QAAvB,IAAuBA,OAAvB,EAAuBA,EAAUjB,QAC/BgB,IAAc,SAAC,MAAD,CAAe7D,UAAU,uBAE3C,SAACqE,EAAA,GAAD,kBAAYL,EAAOM,aAAnB,cACE,SAACD,EAAA,UAAD,WACE,SAAClC,EAAD,CAAiBC,SA3BzB,SAAsBuB,GACpBK,EAAOO,QACPR,EAAYtB,EAAAA,EAAAA,MAAmB,SAACC,GAAD,OAAUA,EAAKiB,UAAYA,iB,yGCpBxD/D,EACkB,0DADlBA,EAEE,4FAFFA,EAGS,iCAHTA,EAIM,mFAmCN4E,EAAmB,SAAClC,GACxB,GAAc,KAAVA,EAAc,CAChB,IAAMmC,EANS,SAACnC,GAClB,MAAiB,MAAVA,EAAgB,KAAOA,EAKboC,CAAWpC,GAC1B,OAAOqC,EAAAA,EAAAA,YAAWF,EAAQG,EAAAA,IAAeC,WAE3C,OAAOA,EAAAA,EAAAA,IAAS,IAGZC,EAAc,SAACC,GACnB,OAAc,MAAVA,GACKC,EAAAA,EAAAA,aAAYD,EAAQH,EAAAA,IACjBG,OAAL,EACE,IAIJ,SAASE,EAAT,GASY,IARTC,EAQQ,EARhBH,OACA3B,EAOgB,EAPhBA,SACAS,EAMgB,EANhBA,WAMgB,IALhBsB,YAAAA,OAKgB,SAJhBzC,EAIgB,EAJhBA,KACA0C,EAGgB,EAHhBA,OACAC,EAEgB,EAFhBA,QACGC,GACa,YAChB,GAA4BjD,EAAAA,EAAAA,UAAwB,MAApD,eAAO0C,EAAP,KAAeQ,EAAf,KACA,EC7EK,WAAkD,IAA7BC,EAA4B,uDAAJ,GAC5CC,GAASC,EAAAA,EAAAA,MACf,OAAOC,EAAAA,EAAAA,UAAS,uBAAuB,kBAAMF,EAAQG,gBAAeJ,GD2EzCK,CAAY,CAAEC,QAASX,IAApCY,EAAd,EAAQC,KACFC,EAAW,OAAGF,QAAH,IAAGA,OAAH,EAAGA,EAAUG,MAAK,SAACzF,GAAD,OAAUA,EAAKkD,WAAL,OAAiBjB,QAAjB,IAAiBA,OAAjB,EAAiBA,EAAMiB,YAQpE,SAASwC,IACP,IAAMpB,GAAoB,OAAXkB,QAAW,IAAXA,OAAA,EAAAA,EAAalB,SAAUqB,OAAO,GAC7C,OAAOrB,EAASqB,OAAO,GAAKrB,GAAUK,GAAUgB,OAAO,IAAMrB,EA6B/D,OArCAnD,EAAAA,EAAAA,YAAU,WACa,MAAjBsD,GAAuBK,EAAUL,KACpC,CAACA,IAmCG,CACLH,OAAAA,EACAsB,UAAWvB,EAAYC,GACvBQ,UAAAA,EACAe,cA9BF,WACE,OAAO,kBACFhB,GADL,IAEE5C,KAAAA,EACAmB,WAAAA,EACAvB,MAAOwC,EAAYC,GACnBwB,YAAc1C,EAAa,OAAS,QACpCwB,QAAAA,EACAjC,SAAU,SAACoD,GACT,IAAI3C,EAAJ,CACA,IAAM4C,EAAe,KAARD,EAAahC,EAAiBgC,GAAO,KAC9B,oBAAbpD,EAA0BA,EAASqD,GAAQlB,EAAUkB,KAE9DC,UAAW,YAAoC,IAAjCpE,EAAgC,EAAhCA,MACZ,OAAOkC,EAAiBlC,IAhGV,qBAkGhBqE,cAAe,WACN,OAAPtB,QAAO,IAAPA,GAAAA,IACAE,EAAUY,MAEZS,QAAS9B,GAAuB,OAAXmB,QAAW,IAAXA,OAAA,EAAAA,EAAalB,SAAUqB,OAAO,IACnDjB,YAAAA,EACA0B,cAAe1B,KASjB2B,iBAAkBX,MAAwBpB,GAAUqB,OAAO,KAIxD,IAAMW,GAAYjH,EAAAA,EAAAA,aACvB,WAiBEC,GACI,IAhBKiH,EAgBN,EAhBD1E,MACAiE,EAeC,EAfDA,YACAnD,EAcC,EAdDA,SACAV,EAaC,EAbDA,KACAgE,EAYC,EAZDA,UACAO,EAWC,EAXDA,aACA5B,EAUC,EAVDA,QACAxB,EASC,EATDA,WACAqD,EAQC,EARDA,qBACAL,EAOC,EAPDA,cACA1B,EAMC,EANDA,YACAwB,EAKC,EALDA,cACAC,EAIC,EAJDA,QACAO,EAGC,EAHDA,UAIF,GAA0B9E,EAAAA,EAAAA,UAA6B2E,GAAvD,eAAO1E,EAAP,KAAcC,EAAd,KAQA,OANAX,EAAAA,EAAAA,YAAU,WACJoF,GACFzE,EAASyE,KAEV,CAACA,KAGF,iBAAKhH,UAAWJ,EAAhB,WACE,SAAC,IAAD,CACEuH,UAAWA,EACXC,YAAarH,EACbsH,eAAe,EACfC,aAAcN,EACd1E,MAAOA,EACPiE,YAAaA,EACbG,UAAWA,EACXtD,SAAU,SAACmE,GACD,OAARnE,QAAQ,IAARA,GAAAA,EAAWmE,EAAEC,OAAOlF,OACpBC,EAASgF,EAAEC,OAAOlF,QAEpBmF,aAAc7C,EAAAA,GACdzB,YAAY,IACZnD,UAAWJ,EACX8H,mBAAmB,EACnBrC,QAASA,KAEX,iBAAKrF,UAAWJ,EAAhB,WACE,SAACgE,EAAD,CACEtB,MAAOI,EACPU,SAAU6D,EACVpD,WAAYA,GAAcqD,KAE1B/B,GAAe0B,KACf,iBAAK7G,UAAU,+BAAf,UACGmF,IACC,iBAAKnF,UAAU,wBAAf,sBAAiD4G,KAElDC,IACC,SAAC3C,EAAA,EAAD,CACEE,KAAK,KACLuD,QAAShB,EACT3G,UAAWJ,EACXgI,QAAQ,QAJV,8B,2KEjLT,SAASC,EAAT,GAMQ,IALbC,EAKY,EALZA,KACAC,EAIY,EAJZA,WACA/H,EAGY,EAHZA,UACAgI,EAEY,EAFZA,SACG/H,GACS,YACNF,GAAMI,EAAAA,EAAAA,QAAiC,MAC7C,GAAmC8H,EAAAA,EAAAA,IAAU,kBACtChI,GADqC,IAC9BiI,YAAa,MACzBnI,GAFMoI,EAAR,EAAQA,YAAaC,EAArB,EAAqBA,UAKrB,OACE,gDACMD,GACCL,GAAQ,CAAEA,KAAAA,IAFjB,IAGE/H,IAAKA,EACLC,UAAWO,GAAAA,CAAGP,EAAW,QACzB,eAAcoI,GACTL,GAAc,CAAEP,OAAQ,SAAUa,IAAK,wBAN9C,aAQGL,O,mCC/BDvF,EAA6B,CACjC,CACEI,KAAM,QACNa,OAAQ,MACRC,QAAS,qEACTL,IAAK,kBAEP,CACET,KAAM,MACNa,OAAQ,MAIRC,QAAS2E,EAAAA,GACThF,IAAK,kBAEP,CACET,KAAM,OACNa,OAAQ,OAIRC,QAAS4E,EAAAA,GACTjF,IAAK,oBAIT,O,4OChBe,SAASkF,IACtB,IAAM/C,GAASC,EAAAA,EAAAA,MACT+C,GAAWC,EAAAA,EAAAA,MACXC,GAAWC,EAAAA,EAAAA,MAEXC,EAAiBC,EAAAA,EAAAA,MAAW,SAACC,GAAD,OAAOA,EAAEpF,UAAY4E,EAAAA,MACjDS,GAAa/D,EAAAA,EAAAA,GAAa,CAAEvC,KAAMmG,IAClC9D,EAASiE,EAAWjE,OAEZ6B,GAAYjB,EAAAA,EAAAA,UACxB,+BADgC,iBAEhC,sGACyBF,EAAOG,cADhC,cACQG,EADR,OAEQkD,EAASlD,EAASG,MAAK,SAACgD,GAAD,OAAOA,EAAEvF,UAAY4E,EAAAA,MAFpD,kBAGS,CACLxD,QAAQF,EAAAA,EAAAA,KAAe,OAANoE,QAAM,IAANA,OAAA,EAAAA,EAAQlE,SAAU,GACnCsB,UAAW4C,GAASjE,EAAAA,EAAAA,aAAW,OAACiE,QAAD,IAACA,OAAD,EAACA,EAAQlE,OAAQH,EAAAA,IAAiB,MALrE,4CAFMoB,KAYFmD,GAA0BC,EAAAA,EAAAA,cAAW,iBACzC,iFACOrE,EADP,sBAEU,IAAIsE,MAAM,wBAFpB,YAIMtE,GAAM,OAAG6B,QAAH,IAAGA,OAAH,EAAGA,EAAS7B,SAJxB,sBAKU,IAAIsE,MAAM,8CALpB,uBASQZ,EAASa,UAAUC,iBAAiB,EAAG,EAAG,IAAM,CACpDC,QAAS,CAACzE,EAAQwD,EAAAA,IAClBkB,gBAAiB,IAXrB,2CAcA,CACEC,UAAW,WACTC,EAAAA,GAAAA,QAAc,mCACdhB,EAASiB,EAAAA,EAAAA,SAEXC,QAAS,SAACC,GACRH,EAAAA,GAAAA,MAAYG,EAAMC,YAKxB,OAAKlB,GAKH,iCACE,iBAAK7I,UAAU,YAAf,WACE,SAAC,KAAD,kBACMgJ,EAAW1C,iBADjB,IAEEa,WAAS,EACTD,sBAAsB,MAExB,UAAC,IAAD,CACElH,UAAU,wBACV2H,QAAS,kBAAMqB,EAAWzD,UAAX,OAAqBqB,QAArB,IAAqBA,OAArB,EAAqBA,EAAS7B,SAF/C,0BAIsB,OAAP6B,QAAO,IAAPA,OAAA,EAAAA,EAASP,YAAc,aAGxC,SAAC,IAAD,CACE2D,QAAM,EACN5F,KAAK,KACLwD,QAAQ,UACRD,QAAS,kBAAMwB,EAAwBc,UACvCrJ,YACGmE,IACA6B,GACD7B,EAAS6B,EAAQ7B,QACjBoE,EAAwBe,UAT5B,SAYGf,EAAwBe,UAAY,cAAgB,wBA9BlD","sources":["components/Input.tsx","components/Menu.tsx","components/CoinsListDialog.tsx","components/CoinSelector.tsx","components/CoinInput.tsx","hooks/useBalances.ts","components/Link.tsx","lib/CoinsMetadata.ts","pages/PoolPage/RemoveLiquidity.tsx"],"sourcesContent":["import { AriaTextFieldOptions, useTextField } from \"@react-aria/textfield\";\nimport { FC, forwardRef, useRef } from \"react\";\nimport cx from \"classnames\";\nimport mergeRefs from \"react-merge-refs\";\n\nconst style = {\n  input: `appearance-none w-full rounded-md bg-gray-700 px-4 py-2 focus-ring text-gray-100`,\n};\n\ntype InputProps = AriaTextFieldOptions<\"input\"> & {\n  className?: string;\n};\n\nexport const Input: FC<InputProps> = forwardRef<HTMLInputElement, InputProps>(\n  ({ className, ...props }, ref) => {\n    const innerRef = useRef<HTMLInputElement | null>(null);\n    let { inputProps } = useTextField(props, innerRef);\n    return (\n      <input\n        ref={mergeRefs([innerRef, ref])}\n        className={cx(className, style.input)}\n        {...inputProps}\n      />\n    );\n  }\n);\n","import { ItemProps, Node } from \"@react-types/shared\";\nimport { useMenu, useMenuItem } from \"@react-aria/menu\";\nimport { useTreeState, TreeProps, TreeState } from \"@react-stately/tree\";\nimport { Item } from \"@react-stately/collections\";\nimport { FC, Key, useEffect, useRef } from \"react\";\n\ntype ListItemProps = {\n  item: Node<any>;\n  state: TreeState<any>;\n  onAction?: (key: Key) => void;\n  className?: string;\n};\n\nfunction ListItem({ item, state, onAction, className }: ListItemProps) {\n  // Get props for the menu item element\n  const ref = useRef<HTMLLIElement | null>(null);\n  const isDisabled = state.disabledKeys.has(item.key);\n  const isFocused = state.selectionManager.focusedKey === item.key;\n\n  const { menuItemProps } = useMenuItem(\n    {\n      key: item.key,\n      isDisabled,\n      onAction,\n    },\n    state,\n    ref\n  );\n\n  return (\n    <li\n      {...menuItemProps}\n      ref={ref}\n      className={className}\n      data-focused={isFocused}\n    >\n      {item.rendered}\n    </li>\n  );\n}\n\nexport type MenuProps = TreeProps<any> & {\n  onAction?: (key: Key) => void;\n  className?: string;\n  focusOnMount?: boolean;\n};\n\ntype MenuComponent = FC<MenuProps> & {\n  Item: typeof CustomItem;\n};\n\nexport const Menu: MenuComponent = ({\n  className,\n  onAction,\n  focusOnMount,\n  ...props\n}) => {\n  // Create state based on the incoming props\n  const state = useTreeState({ ...props, selectionMode: \"none\" });\n\n  // Get props for the menu element\n  const ref = useRef<HTMLUListElement | null>(null);\n  const { menuProps } = useMenu(props, state, ref);\n\n  useEffect(() => {\n    if (focusOnMount) {\n      ref.current?.focus();\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  return (\n    <ul {...menuProps} ref={ref} className={className}>\n      {[...state.collection].map((item) => (\n        <ListItem\n          className={item.props.className}\n          key={item.key}\n          item={item}\n          state={state}\n          onAction={onAction}\n        />\n      ))}\n    </ul>\n  );\n};\n\ntype CustomItemComponent = FC<ItemProps<any> & { className?: string }>;\nconst CustomItem = Item as CustomItemComponent;\nMenu.Item = CustomItem;\n","import { useState } from \"react\";\nimport CoinsMetadata from \"src/lib/CoinsMetadata\";\nimport { Coin } from \"src/types\";\nimport { Input } from \"./Input\";\nimport { Menu } from \"./Menu\";\n\nconst style = {\n  input: `appearance-none w-full rounded-md bg-gray-700 px-4 py-2 focus-ring text-gray-100`,\n  coinItem: `py-2 px-6 flex items-center gap-3 border-t border-gray-700\n  hover:bg-gray-700/50 hover:cursor-pointer focus-ring`,\n  noResults: `px-6 py-4 border-t border-gray-700`,\n};\n\nexport type CoinListModalProps = {\n  onSelect?: (assetId: string) => void;\n};\n\nexport function CoinsListDialog({ onSelect }: CoinListModalProps) {\n  const [value, setValue] = useState(\"\");\n\n  function filterBySearch(coin: Coin) {\n    if (!Boolean(value.length)) return coin;\n    return coin.name?.toLowerCase().includes(value.toLocaleLowerCase());\n  }\n\n  const filtered = CoinsMetadata.filter(filterBySearch);\n  const hasResults = Boolean(filtered.length);\n\n  return (\n    <div>\n      <header className=\"py-4 px-6 pb-5\">\n        <h2 className=\"text-gray-50 text-lg mb-3\">Select a token</h2>\n        <Input\n          type=\"text\"\n          placeholder=\"Search by name...\"\n          value={value}\n          onChange={setValue}\n        />\n      </header>\n      {hasResults ? (\n        <Menu\n          onAction={(key) => onSelect?.(key as string)}\n          className=\"pb-2\"\n          focusOnMount\n        >\n          {filtered.map((coin) => (\n            <Menu.Item key={coin.assetId} className={style.coinItem}>\n              <img\n                className=\"rounded-full border-none ml-1\"\n                src={coin.img}\n                alt={coin.name}\n                height={30}\n                width={30}\n              />\n              <div className=\"flex flex-col\">\n                <div className=\"text-gray-50\">{coin.symbol}</div>\n                <div className=\"text-sm\">{coin.name}</div>\n              </div>\n            </Menu.Item>\n          ))}\n        </Menu>\n      ) : (\n        <div className={style.noResults}>😢 Oops, no token found!</div>\n      )}\n    </div>\n  );\n}\n","import { useState, useEffect } from \"react\";\nimport { FiChevronDown } from \"react-icons/fi\";\nimport CoinsMetadata from \"src/lib/CoinsMetadata\";\nimport { Coin } from \"src/types\";\n\nimport { Button } from \"./Button\";\nimport { CoinsListDialog } from \"./CoinsListDialog\";\nimport { Dialog, useDialogProps } from \"./Dialog\";\n\nconst style = {\n  currencySelector: `flex1`,\n};\n\ntype CoinSelectorProps = {\n  value?: Coin | null;\n  onChange?: (coin: Coin) => void;\n  isReadOnly?: boolean;\n};\n\nexport function CoinSelector({\n  value,\n  onChange,\n  isReadOnly,\n}: CoinSelectorProps) {\n  const [selected, setSelected] = useState<Coin | null>(null);\n  const dialog = useDialogProps();\n\n  useEffect(() => {\n    if (!value) return setSelected(null);\n    setSelected(value);\n  }, [value]);\n\n  function handleSelect(assetId: string) {\n    dialog.close();\n    setSelected(CoinsMetadata.find((coin) => coin.assetId === assetId)!);\n  }\n\n  return (\n    <div className={style.currencySelector}>\n      <Button\n        {...dialog.openButtonProps}\n        size=\"md\"\n        className=\"coin-selector\"\n        isDisabled={isReadOnly}\n      >\n        {selected && selected.img && (\n          <img\n            className=\"rounded-full border-none ml-1\"\n            src={selected.img}\n            alt={selected.name}\n            height={20}\n            width={20}\n          />\n        )}\n        <div className=\"ml-2\">{selected?.name}</div>\n        {!isReadOnly && <FiChevronDown className=\"text-gray-500\" />}\n      </Button>\n      <Dialog {...dialog.dialogProps}>\n        <Dialog.Content>\n          <CoinsListDialog onSelect={handleSelect} />\n        </Dialog.Content>\n      </Dialog>\n    </div>\n  );\n}\n","import { toBigInt } from \"fuels\";\nimport { formatUnits, parseUnits } from \"ethers/lib/utils\";\nimport { forwardRef, useEffect } from \"react\";\nimport { useState } from \"react\";\nimport NumberFormat, { NumberFormatValues } from \"react-number-format\";\nimport { DECIMAL_UNITS } from \"src/config\";\nimport { CoinSelector } from \"./CoinSelector\";\nimport { Button } from \"./Button\";\nimport { Coin } from \"src/types\";\nimport { useBalances } from \"src/hooks/useBalances\";\n\n// Max value supported\nconst MAX_U64_VALUE = 0xffff_ffff_ffff_ffff;\n\nconst style = {\n  transferPropContainer: `flex bg-gray-700 rounded-2xl p-2 border border-gray-700`,\n  input: `mx-2 h-10 bg-transparent placeholder:text-gray-300 outline-none text-xl flex items-center`,\n  rightWrapper: `flex flex-1 flex-col items-end`,\n  maxButton: `text-xs py-0 px-1 h-auto bg-primary-800/60 text-primary-500 hover:bg-primary-800`,\n};\n\ntype UseCoinParams = {\n  amount?: bigint | null;\n  isReadOnly?: boolean;\n  coinSelectorDisabled?: boolean;\n  coin?: Coin | null;\n  gasFee?: bigint;\n  showBalance?: boolean;\n  onInput?: (...args: any) => void;\n  onChange?: (val: bigint | null) => void;\n  onChangeCoin?: (value: Coin) => void;\n};\n\ntype DisplayType = \"input\" | \"text\";\n\ntype CoinInputParameters = UseCoinParams & {\n  value: string;\n  balance?: string;\n  displayType: DisplayType;\n  isReadOnly?: boolean;\n  coinSelectorDisable?: boolean;\n  showBalance?: boolean;\n  showMaxButton?: boolean;\n  autoFocus?: boolean;\n  isAllowed?: (values: NumberFormatValues) => boolean;\n  onChange?: (val: string) => void;\n  setMaxBalance?: () => void;\n};\n\nconst parseValue = (value: string) => {\n  return value === \".\" ? \"0.\" : value;\n};\n\nconst parseValueBigInt = (value: string) => {\n  if (value !== \"\") {\n    const _value = parseValue(value);\n    return parseUnits(_value, DECIMAL_UNITS).toBigInt();\n  }\n  return toBigInt(0);\n};\n\nconst formatValue = (amount: bigint | null | undefined) => {\n  if (amount != null) {\n    return formatUnits(amount, DECIMAL_UNITS);\n  } else if (!amount) {\n    return \"\";\n  }\n};\n\nexport function useCoinInput({\n  amount: initialAmount,\n  onChange,\n  isReadOnly,\n  showBalance = true,\n  coin,\n  gasFee,\n  onInput,\n  ...params\n}: UseCoinParams) {\n  const [amount, setAmount] = useState<bigint | null>(null);\n  const { data: balances } = useBalances({ enabled: showBalance });\n  const coinBalance = balances?.find((item) => item.assetId === coin?.assetId);\n\n  useEffect(() => {\n    if (initialAmount != null) setAmount(initialAmount);\n  }, [initialAmount]);\n\n  // TODO: consider real gas fee, replacing GAS_FEE variable.\n  // For now we need to keep 1 unit in the wallet(it's not spent) in order to complete \"create pool\" transaction.\n  function getSafeMaxBalance() {\n    const amount = coinBalance?.amount || BigInt(0);\n    return amount > BigInt(0) ? amount - (gasFee || BigInt(0)) : amount;\n  }\n\n  function getInputProps() {\n    return {\n      ...params,\n      coin,\n      isReadOnly,\n      value: formatValue(amount),\n      displayType: (isReadOnly ? \"text\" : \"input\") as DisplayType,\n      onInput,\n      onChange: (val: string) => {\n        if (isReadOnly) return;\n        const next = val !== \"\" ? parseValueBigInt(val) : null;\n        typeof onChange === \"function\" ? onChange(next) : setAmount(next);\n      },\n      isAllowed: ({ value }: NumberFormatValues) => {\n        return parseValueBigInt(value) <= MAX_U64_VALUE;\n      },\n      setMaxBalance: () => {\n        onInput?.();\n        setAmount(getSafeMaxBalance());\n      },\n      balance: formatValue(coinBalance?.amount || BigInt(0)),\n      showBalance,\n      showMaxButton: showBalance,\n    } as CoinInputParameters;\n  }\n\n  return {\n    amount,\n    formatted: formatValue(amount),\n    setAmount,\n    getInputProps,\n    hasEnoughBalance: getSafeMaxBalance() >= (amount || BigInt(0)),\n  };\n}\n\nexport const CoinInput = forwardRef<HTMLInputElement, CoinInputParameters>(\n  (\n    {\n      value: initialValue,\n      displayType,\n      onChange,\n      coin,\n      isAllowed,\n      onChangeCoin,\n      onInput,\n      isReadOnly,\n      coinSelectorDisabled,\n      showMaxButton,\n      showBalance,\n      setMaxBalance,\n      balance,\n      autoFocus,\n    },\n    ref\n  ) => {\n    const [value, setValue] = useState<string | undefined>(initialValue);\n\n    useEffect(() => {\n      if (initialValue) {\n        setValue(initialValue);\n      }\n    }, [initialValue]);\n\n    return (\n      <div className={style.transferPropContainer}>\n        <NumberFormat\n          autoFocus={autoFocus}\n          getInputRef={ref}\n          allowNegative={false}\n          defaultValue={initialValue}\n          value={value}\n          displayType={displayType}\n          isAllowed={isAllowed}\n          onChange={(e: React.ChangeEvent<HTMLInputElement>) => {\n            onChange?.(e.target.value);\n            setValue(e.target.value);\n          }}\n          decimalScale={DECIMAL_UNITS}\n          placeholder=\"0\"\n          className={style.input}\n          thousandSeparator={false}\n          onInput={onInput}\n        />\n        <div className={style.rightWrapper}>\n          <CoinSelector\n            value={coin}\n            onChange={onChangeCoin}\n            isReadOnly={isReadOnly || coinSelectorDisabled}\n          />\n          {(showBalance || showMaxButton) && (\n            <div className=\"flex items-center gap-2 mt-2\">\n              {showBalance && (\n                <div className=\"text-xs text-gray-400\">Balance: {balance}</div>\n              )}\n              {showMaxButton && (\n                <Button\n                  size=\"sm\"\n                  onPress={setMaxBalance}\n                  className={style.maxButton}\n                  variant=\"ghost\"\n                >\n                  Max\n                </Button>\n              )}\n            </div>\n          )}\n        </div>\n      </div>\n    );\n  }\n);\n","import { useQuery, UseQueryOptions } from 'react-query';\nimport { useWallet } from 'src/context/AppContext';\n\nexport function useBalances(opts: UseQueryOptions = {}) {\n  const wallet = useWallet();\n  return useQuery('AssetsPage-balances', () => wallet!.getBalances(), opts as any);\n}\n","import { useButton } from \"@react-aria/button\";\nimport { ReactNode, useRef } from \"react\";\nimport { AriaButtonProps } from \"@react-types/button\";\nimport cx from \"classnames\";\n\nexport type LinkProps = AriaButtonProps<\"a\"> & {\n  href?: string;\n  children: ReactNode;\n  isExternal?: boolean;\n  className?: string;\n};\n\nexport function Link({\n  href,\n  isExternal,\n  className,\n  children,\n  ...props\n}: LinkProps) {\n  const ref = useRef<HTMLAnchorElement | null>(null);\n  const { buttonProps, isPressed } = useButton(\n    { ...props, elementType: \"a\" },\n    ref\n  );\n\n  return (\n    <a\n      {...buttonProps}\n      {...(href && { href })}\n      ref={ref}\n      className={cx(className, \"link\")}\n      data-pressed={isPressed}\n      {...(isExternal && { target: \"_blank\", rel: \"noopener noreferrer\" })}\n    >\n      {children}\n    </a>\n  );\n}\n","import { Coin } from 'src/types';\nimport { CONTRACT_ID, TOKEN_ID } from 'src/config';\n\nconst CoinsMetadata: Array<Coin> = [\n  {\n    name: 'Ether',\n    symbol: 'ETH',\n    assetId: '0x0000000000000000000000000000000000000000000000000000000000000000',\n    img: '/icons/eth.svg',\n  },\n  {\n    name: 'DAI',\n    symbol: 'DAI',\n    // TODO: Remove this when adding dynamic token insertion\n    // Make temporarily easy to change token contract id\n    // https://github.com/FuelLabs/swayswap-demo/issues/33\n    assetId: TOKEN_ID,\n    img: '/icons/dai.svg',\n  },\n  {\n    name: 'Sway',\n    symbol: 'SWAY',\n    // TODO: Remove this when adding dynamic token insertion\n    // Make temporarily easy to change token contract id\n    // https://github.com/FuelLabs/swayswap-demo/issues/33\n    assetId: CONTRACT_ID,\n    img: '/icons/sway.svg',\n  },\n];\n\nexport default CoinsMetadata;\n","import { formatUnits } from \"ethers/lib/utils\";\nimport { toBigInt } from \"fuels\";\nimport { useMutation, useQuery } from \"react-query\";\nimport { useNavigate } from \"react-router-dom\";\nimport toast from \"react-hot-toast\";\n\nimport { Button } from \"src/components/Button\";\nimport { CoinInput, useCoinInput } from \"src/components/CoinInput\";\nimport { CONTRACT_ID, DECIMAL_UNITS } from \"src/config\";\nimport { Link } from \"src/components/Link\";\nimport { Pages } from \"src/types/pages\";\nimport coins from \"src/lib/CoinsMetadata\";\nimport { useContract, useWallet } from \"src/context/AppContext\";\n\nexport default function RemoveLiquidityPage() {\n  const wallet = useWallet()!;\n  const contract = useContract()!;\n  const navigate = useNavigate();\n\n  const liquidityToken = coins.find((c) => c.assetId === CONTRACT_ID);\n  const tokenInput = useCoinInput({ coin: liquidityToken });\n  const amount = tokenInput.amount;\n\n  const { data: balance } = useQuery(\n    \"RemoveLiquidityPage-balance\",\n    async () => {\n      const balances = await wallet.getBalances();\n      const result = balances.find((b) => b.assetId === CONTRACT_ID)!;\n      return {\n        amount: toBigInt(result?.amount || 0),\n        formatted: result ? formatUnits(result?.amount, DECIMAL_UNITS) : \"0\",\n      };\n    }\n  );\n\n  const removeLiquidityMutation = useMutation(\n    async () => {\n      if (!amount) {\n        throw new Error('\"amount\" is required');\n      }\n      if (amount > balance?.amount!) {\n        throw new Error(\"Amount is bigger them the current balance!\");\n      }\n      // TODO: Add way to set min_eth and min_tokens\n      // https://github.com/FuelLabs/swayswap/issues/55\n      await contract.functions.remove_liquidity(1, 1, 1000, {\n        forward: [amount, CONTRACT_ID],\n        variableOutputs: 2,\n      });\n    },\n    {\n      onSuccess: () => {\n        toast.success(\"Liquidity removed successfully!\");\n        navigate(Pages.wallet);\n      },\n      onError: (error: Error) => {\n        toast.error(error.message);\n      },\n    }\n  );\n\n  if (!liquidityToken) {\n    return null;\n  }\n\n  return (\n    <>\n      <div className=\"mt-4 mb-4\">\n        <CoinInput\n          {...tokenInput.getInputProps()}\n          autoFocus\n          coinSelectorDisabled={true}\n        />\n        <Link\n          className=\"inline-flex mt-2 ml-2\"\n          onPress={() => tokenInput.setAmount(balance?.amount!)}\n        >\n          Max amount: {balance?.formatted! || \"...\"}\n        </Link>\n      </div>\n      <Button\n        isFull\n        size=\"lg\"\n        variant=\"primary\"\n        onPress={() => removeLiquidityMutation.mutate()}\n        isDisabled={\n          !amount ||\n          !balance ||\n          amount > balance.amount ||\n          removeLiquidityMutation.isLoading\n        }\n      >\n        {removeLiquidityMutation.isLoading ? \"Removing...\" : \"Remove liquidity\"}\n      </Button>\n    </>\n  );\n}\n"],"names":["style","Input","forwardRef","ref","className","props","innerRef","useRef","inputProps","useTextField","mergeRefs","cx","ListItem","item","state","onAction","isDisabled","disabledKeys","has","key","isFocused","selectionManager","focusedKey","menuItemProps","useMenuItem","rendered","Menu","focusOnMount","useTreeState","selectionMode","menuProps","useMenu","useEffect","current","focus","collection","map","CustomItem","Item","CoinsListDialog","onSelect","useState","value","setValue","filtered","CoinsMetadata","coin","Boolean","length","name","toLowerCase","includes","toLocaleLowerCase","hasResults","type","placeholder","onChange","src","img","alt","height","width","symbol","assetId","CoinSelector","isReadOnly","selected","setSelected","dialog","useDialogProps","Button","openButtonProps","size","Dialog","dialogProps","close","parseValueBigInt","_value","parseValue","parseUnits","DECIMAL_UNITS","toBigInt","formatValue","amount","formatUnits","useCoinInput","initialAmount","showBalance","gasFee","onInput","params","setAmount","opts","wallet","useWallet","useQuery","getBalances","useBalances","enabled","balances","data","coinBalance","find","getSafeMaxBalance","BigInt","formatted","getInputProps","displayType","val","next","isAllowed","setMaxBalance","balance","showMaxButton","hasEnoughBalance","CoinInput","initialValue","onChangeCoin","coinSelectorDisabled","autoFocus","getInputRef","allowNegative","defaultValue","e","target","decimalScale","thousandSeparator","onPress","variant","Link","href","isExternal","children","useButton","elementType","buttonProps","isPressed","rel","TOKEN_ID","CONTRACT_ID","RemoveLiquidityPage","contract","useContract","navigate","useNavigate","liquidityToken","coins","c","tokenInput","result","b","removeLiquidityMutation","useMutation","Error","functions","remove_liquidity","forward","variableOutputs","onSuccess","toast","Pages","onError","error","message","isFull","mutate","isLoading"],"sourceRoot":""}