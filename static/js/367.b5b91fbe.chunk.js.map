{"version":3,"file":"static/js/367.b5b91fbe.chunk.js","mappings":"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","sources":["components/Input.tsx","components/Menu.tsx","components/CoinsListDialog.tsx","components/CoinSelector.tsx","components/CoinInput.tsx","hooks/useBalances.ts","components/PageContent.tsx","lib/CoinsMetadata.ts","lib/utils.ts","pages/SwapPage/types.ts","pages/SwapPage/queries.ts","components/InvertButton.tsx","pages/SwapPage/SwapComponent.tsx","pages/SwapPage/index.tsx","hooks/useDebounce.tsx"],"sourcesContent":["import { AriaTextFieldOptions, useTextField } from \"@react-aria/textfield\";\nimport { FC, forwardRef, useRef } from \"react\";\nimport cx from \"classnames\";\nimport mergeRefs from \"react-merge-refs\";\n\nconst style = {\n  input: `appearance-none w-full rounded-md bg-gray-700 px-4 py-2 focus-ring text-gray-100`,\n};\n\ntype InputProps = AriaTextFieldOptions<\"input\"> & {\n  className?: string;\n};\n\nexport const Input: FC<InputProps> = forwardRef<HTMLInputElement, InputProps>(\n  ({ className, ...props }, ref) => {\n    const innerRef = useRef<HTMLInputElement | null>(null);\n    let { inputProps } = useTextField(props, innerRef);\n    return (\n      <input\n        ref={mergeRefs([innerRef, ref])}\n        className={cx(className, style.input)}\n        {...inputProps}\n      />\n    );\n  }\n);\n","import { ItemProps, Node } from \"@react-types/shared\";\nimport { useMenu, useMenuItem } from \"@react-aria/menu\";\nimport { useTreeState, TreeProps, TreeState } from \"@react-stately/tree\";\nimport { Item } from \"@react-stately/collections\";\nimport { FC, Key, useEffect, useRef } from \"react\";\n\ntype ListItemProps = {\n  item: Node<any>;\n  state: TreeState<any>;\n  onAction?: (key: Key) => void;\n  className?: string;\n};\n\nfunction ListItem({ item, state, onAction, className }: ListItemProps) {\n  // Get props for the menu item element\n  const ref = useRef<HTMLLIElement | null>(null);\n  const isDisabled = state.disabledKeys.has(item.key);\n  const isFocused = state.selectionManager.focusedKey === item.key;\n\n  const { menuItemProps } = useMenuItem(\n    {\n      key: item.key,\n      isDisabled,\n      onAction,\n    },\n    state,\n    ref\n  );\n\n  return (\n    <li\n      {...menuItemProps}\n      ref={ref}\n      className={className}\n      data-focused={isFocused}\n    >\n      {item.rendered}\n    </li>\n  );\n}\n\nexport type MenuProps = TreeProps<any> & {\n  onAction?: (key: Key) => void;\n  className?: string;\n  focusOnMount?: boolean;\n};\n\ntype MenuComponent = FC<MenuProps> & {\n  Item: typeof CustomItem;\n};\n\nexport const Menu: MenuComponent = ({\n  className,\n  onAction,\n  focusOnMount,\n  ...props\n}) => {\n  // Create state based on the incoming props\n  const state = useTreeState({ ...props, selectionMode: \"none\" });\n\n  // Get props for the menu element\n  const ref = useRef<HTMLUListElement | null>(null);\n  const { menuProps } = useMenu(props, state, ref);\n\n  useEffect(() => {\n    if (focusOnMount) {\n      ref.current?.focus();\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  return (\n    <ul {...menuProps} ref={ref} className={className}>\n      {[...state.collection].map((item) => (\n        <ListItem\n          className={item.props.className}\n          key={item.key}\n          item={item}\n          state={state}\n          onAction={onAction}\n        />\n      ))}\n    </ul>\n  );\n};\n\ntype CustomItemComponent = FC<ItemProps<any> & { className?: string }>;\nconst CustomItem = Item as CustomItemComponent;\nMenu.Item = CustomItem;\n","import { useState } from \"react\";\nimport CoinsMetadata from \"src/lib/CoinsMetadata\";\nimport { Coin } from \"src/types\";\nimport { Input } from \"./Input\";\nimport { Menu } from \"./Menu\";\n\nconst style = {\n  input: `appearance-none w-full rounded-md bg-gray-700 px-4 py-2 focus-ring text-gray-100`,\n  coinItem: `py-2 px-6 flex items-center gap-3 border-t border-gray-700\n  hover:bg-gray-700/50 hover:cursor-pointer focus-ring`,\n  noResults: `px-6 py-4 border-t border-gray-700`,\n};\n\nexport type CoinListModalProps = {\n  onSelect?: (assetId: string) => void;\n};\n\nexport function CoinsListDialog({ onSelect }: CoinListModalProps) {\n  const [value, setValue] = useState(\"\");\n\n  function filterBySearch(coin: Coin) {\n    if (!Boolean(value.length)) return coin;\n    return coin.name?.toLowerCase().includes(value.toLocaleLowerCase());\n  }\n\n  const filtered = CoinsMetadata.filter(filterBySearch);\n  const hasResults = Boolean(filtered.length);\n\n  return (\n    <div>\n      <header className=\"py-4 px-6 pb-5\">\n        <h2 className=\"text-gray-50 text-lg mb-3\">Select a token</h2>\n        <Input\n          type=\"text\"\n          placeholder=\"Search by name...\"\n          value={value}\n          onChange={setValue}\n        />\n      </header>\n      {hasResults ? (\n        <Menu\n          onAction={(key) => onSelect?.(key as string)}\n          className=\"pb-2\"\n          focusOnMount\n        >\n          {filtered.map((coin) => (\n            <Menu.Item key={coin.assetId} className={style.coinItem}>\n              <img\n                className=\"rounded-full border-none ml-1\"\n                src={coin.img}\n                alt={coin.name}\n                height={30}\n                width={30}\n              />\n              <div className=\"flex flex-col\">\n                <div className=\"text-gray-50\">{coin.symbol}</div>\n                <div className=\"text-sm\">{coin.name}</div>\n              </div>\n            </Menu.Item>\n          ))}\n        </Menu>\n      ) : (\n        <div className={style.noResults}>😢 Oops, no token found!</div>\n      )}\n    </div>\n  );\n}\n","import { useState, useEffect } from \"react\";\nimport { FiChevronDown } from \"react-icons/fi\";\nimport CoinsMetadata from \"src/lib/CoinsMetadata\";\nimport { Coin } from \"src/types\";\n\nimport { Button } from \"./Button\";\nimport { CoinsListDialog } from \"./CoinsListDialog\";\nimport { Dialog, useDialogProps } from \"./Dialog\";\n\nconst style = {\n  currencySelector: `flex1`,\n};\n\ntype CoinSelectorProps = {\n  value?: Coin | null;\n  onChange?: (coin: Coin) => void;\n  isReadOnly?: boolean;\n};\n\nexport function CoinSelector({\n  value,\n  onChange,\n  isReadOnly,\n}: CoinSelectorProps) {\n  const [selected, setSelected] = useState<Coin | null>(null);\n  const dialog = useDialogProps();\n\n  useEffect(() => {\n    if (!value) return setSelected(null);\n    setSelected(value);\n  }, [value]);\n\n  function handleSelect(assetId: string) {\n    dialog.close();\n    setSelected(CoinsMetadata.find((coin) => coin.assetId === assetId)!);\n  }\n\n  return (\n    <div className={style.currencySelector}>\n      <Button\n        {...dialog.openButtonProps}\n        size=\"md\"\n        className=\"coin-selector\"\n        isDisabled={isReadOnly}\n      >\n        {selected && selected.img && (\n          <img\n            className=\"rounded-full border-none ml-1\"\n            src={selected.img}\n            alt={selected.name}\n            height={20}\n            width={20}\n          />\n        )}\n        <div className=\"ml-2\">{selected?.name}</div>\n        {!isReadOnly && <FiChevronDown className=\"text-gray-500\" />}\n      </Button>\n      <Dialog {...dialog.dialogProps}>\n        <Dialog.Content>\n          <CoinsListDialog onSelect={handleSelect} />\n        </Dialog.Content>\n      </Dialog>\n    </div>\n  );\n}\n","import { toBigInt } from \"fuels\";\nimport { formatUnits, parseUnits } from \"ethers/lib/utils\";\nimport { forwardRef, useEffect } from \"react\";\nimport { useState } from \"react\";\nimport NumberFormat, { NumberFormatValues } from \"react-number-format\";\nimport { DECIMAL_UNITS } from \"src/config\";\nimport { CoinSelector } from \"./CoinSelector\";\nimport { Button } from \"./Button\";\nimport { Coin } from \"src/types\";\nimport { useBalances } from \"src/hooks/useBalances\";\n\n// Max value supported\nconst MAX_U64_VALUE = 0xffff_ffff_ffff_ffff;\n\nconst style = {\n  transferPropContainer: `flex bg-gray-700 rounded-2xl p-2 border border-gray-700`,\n  input: `mx-2 h-10 bg-transparent placeholder:text-gray-300 outline-none text-xl flex items-center`,\n  rightWrapper: `flex flex-1 flex-col items-end`,\n  maxButton: `text-xs py-0 px-1 h-auto bg-primary-800/60 text-primary-500 hover:bg-primary-800`,\n};\n\ntype UseCoinParams = {\n  amount?: bigint | null;\n  isReadOnly?: boolean;\n  coinSelectorDisabled?: boolean;\n  coin?: Coin | null;\n  gasFee?: bigint;\n  showBalance?: boolean;\n  onInput?: (...args: any) => void;\n  onChange?: (val: bigint | null) => void;\n  onChangeCoin?: (value: Coin) => void;\n};\n\ntype DisplayType = \"input\" | \"text\";\n\ntype CoinInputParameters = UseCoinParams & {\n  value: string;\n  balance?: string;\n  displayType: DisplayType;\n  isReadOnly?: boolean;\n  coinSelectorDisable?: boolean;\n  showBalance?: boolean;\n  showMaxButton?: boolean;\n  autoFocus?: boolean;\n  isAllowed?: (values: NumberFormatValues) => boolean;\n  onChange?: (val: string) => void;\n  setMaxBalance?: () => void;\n};\n\nconst parseValue = (value: string) => {\n  return value === \".\" ? \"0.\" : value;\n};\n\nconst parseValueBigInt = (value: string) => {\n  if (value !== \"\") {\n    const _value = parseValue(value);\n    return parseUnits(_value, DECIMAL_UNITS).toBigInt();\n  }\n  return toBigInt(0);\n};\n\nconst formatValue = (amount: bigint | null | undefined) => {\n  if (amount != null) {\n    return formatUnits(amount, DECIMAL_UNITS);\n  } else if (!amount) {\n    return \"\";\n  }\n};\n\nexport function useCoinInput({\n  amount: initialAmount,\n  onChange,\n  isReadOnly,\n  showBalance = true,\n  coin,\n  gasFee,\n  onInput,\n  ...params\n}: UseCoinParams) {\n  const [amount, setAmount] = useState<bigint | null>(null);\n  const { data: balances } = useBalances({ enabled: showBalance });\n  const coinBalance = balances?.find((item) => item.assetId === coin?.assetId);\n\n  useEffect(() => {\n    if (initialAmount != null) setAmount(initialAmount);\n  }, [initialAmount]);\n\n  // TODO: consider real gas fee, replacing GAS_FEE variable.\n  // For now we need to keep 1 unit in the wallet(it's not spent) in order to complete \"create pool\" transaction.\n  function getSafeMaxBalance() {\n    const amount = coinBalance?.amount || BigInt(0);\n    return amount > BigInt(0) ? amount - (gasFee || BigInt(0)) : amount;\n  }\n\n  function getInputProps() {\n    return {\n      ...params,\n      coin,\n      isReadOnly,\n      value: formatValue(amount),\n      displayType: (isReadOnly ? \"text\" : \"input\") as DisplayType,\n      onInput,\n      onChange: (val: string) => {\n        if (isReadOnly) return;\n        const next = val !== \"\" ? parseValueBigInt(val) : null;\n        typeof onChange === \"function\" ? onChange(next) : setAmount(next);\n      },\n      isAllowed: ({ value }: NumberFormatValues) => {\n        return parseValueBigInt(value) <= MAX_U64_VALUE;\n      },\n      setMaxBalance: () => {\n        onInput?.();\n        setAmount(getSafeMaxBalance());\n      },\n      balance: formatValue(coinBalance?.amount || BigInt(0)),\n      showBalance,\n      showMaxButton: showBalance,\n    } as CoinInputParameters;\n  }\n\n  return {\n    amount,\n    formatted: formatValue(amount),\n    setAmount,\n    getInputProps,\n    hasEnoughBalance: getSafeMaxBalance() >= (amount || BigInt(0)),\n  };\n}\n\nexport const CoinInput = forwardRef<HTMLInputElement, CoinInputParameters>(\n  (\n    {\n      value: initialValue,\n      displayType,\n      onChange,\n      coin,\n      isAllowed,\n      onChangeCoin,\n      onInput,\n      isReadOnly,\n      coinSelectorDisabled,\n      showMaxButton,\n      showBalance,\n      setMaxBalance,\n      balance,\n      autoFocus,\n    },\n    ref\n  ) => {\n    const [value, setValue] = useState<string | undefined>(initialValue);\n\n    useEffect(() => {\n      if (initialValue) {\n        setValue(initialValue);\n      }\n    }, [initialValue]);\n\n    return (\n      <div className={style.transferPropContainer}>\n        <NumberFormat\n          autoFocus={autoFocus}\n          getInputRef={ref}\n          allowNegative={false}\n          defaultValue={initialValue}\n          value={value}\n          displayType={displayType}\n          isAllowed={isAllowed}\n          onChange={(e: React.ChangeEvent<HTMLInputElement>) => {\n            onChange?.(e.target.value);\n            setValue(e.target.value);\n          }}\n          decimalScale={DECIMAL_UNITS}\n          placeholder=\"0\"\n          className={style.input}\n          thousandSeparator={false}\n          onInput={onInput}\n        />\n        <div className={style.rightWrapper}>\n          <CoinSelector\n            value={coin}\n            onChange={onChangeCoin}\n            isReadOnly={isReadOnly || coinSelectorDisabled}\n          />\n          {(showBalance || showMaxButton) && (\n            <div className=\"flex items-center gap-2 mt-2\">\n              {showBalance && (\n                <div className=\"text-xs text-gray-400\">Balance: {balance}</div>\n              )}\n              {showMaxButton && (\n                <Button\n                  size=\"sm\"\n                  onPress={setMaxBalance}\n                  className={style.maxButton}\n                  variant=\"ghost\"\n                >\n                  Max\n                </Button>\n              )}\n            </div>\n          )}\n        </div>\n      </div>\n    );\n  }\n);\n","import { useQuery, UseQueryOptions } from 'react-query';\nimport { useWallet } from 'src/context/AppContext';\n\nexport function useBalances(opts: UseQueryOptions = {}) {\n  const wallet = useWallet();\n  return useQuery('AssetsPage-balances', () => wallet!.getBalances(), opts as any);\n}\n","import classNames from \"classnames\";\nimport { Children, FC, ReactNode } from \"react\";\n\nconst style = {\n  divider: `border border-gray-700 border-b-0`,\n  wrapper: `w-screen flex flex-1 items-center justify-center pb-14`,\n  content: `bg-gray-800 w-[30rem] rounded-2xl py-4 m-2`,\n  titleWrapper: `px-5 flex justify-between text-xl`,\n  title: `flex items-center`,\n};\n\nexport type PageContentProps = {\n  children: ReactNode;\n};\n\nexport type PageTitleProps = {\n  children: ReactNode;\n  elementRight?: ReactNode;\n};\n\ntype PageContentComponent = FC<PageContentProps> & {\n  Title: FC<PageTitleProps>;\n};\n\nexport const PageContent: PageContentComponent = ({ children }) => {\n  const title = Children.toArray(children)?.find(\n    (child: any) => child.type?.id === \"PageTitle\"\n  );\n  const customChildren = Children.toArray(children)?.filter(\n    (child: any) => child.type?.id !== \"PageTitle\"\n  );\n  return (\n    <div className={style.wrapper}>\n      <div className={style.content}>\n        {title}\n        <div className={classNames(style.divider, \"my-4\")} />\n        <div className=\"px-5 pb-2\">{customChildren}</div>\n      </div>\n    </div>\n  );\n};\n\nconst PageTitle: FC<PageTitleProps> & { id: string } = ({\n  children,\n  elementRight,\n}) => {\n  return (\n    <div className={style.titleWrapper}>\n      <h2 className=\"flex items-center gap-2\">{children}</h2>\n      {elementRight}\n    </div>\n  );\n};\nPageTitle.id = \"PageTitle\";\n\nPageContent.Title = PageTitle;\n","import { Coin } from 'src/types';\nimport { CONTRACT_ID, TOKEN_ID } from 'src/config';\n\nconst CoinsMetadata: Array<Coin> = [\n  {\n    name: 'Ether',\n    symbol: 'ETH',\n    assetId: '0x0000000000000000000000000000000000000000000000000000000000000000',\n    img: '/icons/eth.svg',\n  },\n  {\n    name: 'DAI',\n    symbol: 'DAI',\n    // TODO: Remove this when adding dynamic token insertion\n    // Make temporarily easy to change token contract id\n    // https://github.com/FuelLabs/swayswap-demo/issues/33\n    assetId: TOKEN_ID,\n    img: '/icons/dai.svg',\n  },\n  {\n    name: 'Sway',\n    symbol: 'SWAY',\n    // TODO: Remove this when adding dynamic token insertion\n    // Make temporarily easy to change token contract id\n    // https://github.com/FuelLabs/swayswap-demo/issues/33\n    assetId: CONTRACT_ID,\n    img: '/icons/sway.svg',\n  },\n];\n\nexport default CoinsMetadata;\n","export const objectId = (value: string) => ({\n  value,\n});\n\nexport const sleep = (ms: number) => new Promise((resolve) => setTimeout(resolve, ms));\n","export enum ActiveInput {\n  'from' = 'from',\n  'to' = 'to',\n}\n\nexport type SwapState = {\n  from: string;\n  to: string;\n  direction: ActiveInput;\n  amount: bigint | null;\n};\n","import { ExchangeContractAbi } from 'src/types/contracts';\nimport { ActiveInput, SwapState } from './types';\n\nconst getSwapWithMaximumRequiredAmount = async (\n  contract: ExchangeContractAbi,\n  assetId: string,\n  amount: bigint\n) => {\n  const requiredAmount = await contract.callStatic.get_swap_with_maximum(amount, {\n    forward: [0, assetId],\n  });\n  return requiredAmount;\n};\n\nconst getSwapWithMinimumMinAmount = async (\n  contract: ExchangeContractAbi,\n  assetId: string,\n  amount: bigint\n) => {\n  const minAmount = await contract.callStatic.get_swap_with_minimum(amount, {\n    forward: [0, assetId],\n  });\n  return minAmount;\n};\n\nexport const queryPreviewAmount = async (\n  contract: ExchangeContractAbi,\n  { amount, direction, from }: SwapState\n) => {\n  if (direction === ActiveInput.to && amount) {\n    const previewAmount = await getSwapWithMaximumRequiredAmount(contract, from, amount);\n    return previewAmount;\n  } else if (amount) {\n    const previewAmount = await getSwapWithMinimumMinAmount(contract, from, amount);\n    return previewAmount;\n  }\n  return null;\n};\n\nexport const swapTokens = async (\n  contract: ExchangeContractAbi,\n  { from, direction, amount }: SwapState\n) => {\n  const DEADLINE = 1000;\n  if (direction === ActiveInput.to && amount) {\n    const forwardAmount = await getSwapWithMaximumRequiredAmount(contract, from, amount);\n    if (!forwardAmount.has_liquidity) {\n      throw new Error('Not enough liquidity on pool');\n    }\n    await contract.functions.swap_with_maximum(amount, DEADLINE, {\n      forward: [forwardAmount.amount, from],\n      variableOutputs: 1,\n    });\n  } else if (direction === ActiveInput.from && amount) {\n    const minValue = await getSwapWithMinimumMinAmount(contract, from, amount);\n    if (!minValue.has_liquidity) {\n      throw new Error('Not enough liquidity on pool');\n    }\n    await contract.functions.swap_with_minimum(minValue.amount, DEADLINE, {\n      forward: [amount, from],\n      variableOutputs: 1,\n    });\n  }\n};\n","import { useState } from \"react\";\nimport { BsArrowDown, BsArrowUp } from \"react-icons/bs\";\nimport cx from \"classnames\";\nimport { Button } from \"./Button\";\n\nconst style = {\n  confirmButton: `\n    p-0 relative w-12 h-12\n    border-2 border-gray-700 bg-gray-800 rounded-2xl cursor-pointer\n    text-gray-400 hover:text-gray-50\n  `,\n  icon: `transition-all`,\n  iconLeft: `translate-x-[6px]`,\n  iconRight: `translate-x-[-6px]`,\n  rotate: `rotate-180`,\n};\n\nexport function InvertButton({ onClick }: { onClick: () => void }) {\n  const [isInverted, setInverted] = useState(false);\n\n  function handleClick() {\n    setInverted((s) => !s);\n    onClick?.();\n  }\n\n  return (\n    <Button\n      onPress={handleClick}\n      className={style.confirmButton}\n      aria-label=\"Invert coins\"\n    >\n      <BsArrowDown\n        size={24}\n        className={cx(style.icon, style.iconLeft, {\n          [style.rotate]: isInverted,\n        })}\n      />\n      <BsArrowUp\n        size={24}\n        className={cx(style.icon, style.iconRight, {\n          [style.rotate]: isInverted,\n        })}\n      />\n    </Button>\n  );\n}\n","import { useEffect, useRef, useState } from \"react\";\nimport assets from \"src/lib/CoinsMetadata\";\nimport { CoinInput, useCoinInput } from \"src/components/CoinInput\";\nimport { InvertButton } from \"src/components/InvertButton\";\nimport { ActiveInput, SwapState } from \"./types\";\nimport { Coin } from \"src/types\";\n\nconst style = {\n  switchDirection: `flex items-center justify-center -my-5`,\n};\n\ntype SwapComponentProps = {\n  previewAmount?: bigint | null;\n  onChange?: (swapState: SwapState) => void;\n};\n\nexport function SwapComponent({\n  previewAmount: previewValue,\n  onChange,\n}: SwapComponentProps) {\n  const activeInput = useRef<ActiveInput>(ActiveInput.from);\n\n  const [[coinFrom, coinTo], setCoins] = useState<[Coin, Coin]>([\n    assets[0],\n    assets[1],\n  ]);\n\n  const handleInvertCoins = () => {\n    if (activeInput.current === ActiveInput.to) {\n      activeInput.current = ActiveInput.from;\n      fromInput.setAmount(toInput.amount);\n      toInput.setAmount(null);\n    } else {\n      activeInput.current = ActiveInput.to;\n      toInput.setAmount(fromInput.amount);\n      fromInput.setAmount(null);\n    }\n    setCoins([coinTo, coinFrom]);\n  };\n\n  const fromInput = useCoinInput({\n    coin: coinFrom,\n    onChangeCoin: (coin: Coin) => setCoins([coin, coinTo]),\n    onInput: () => (activeInput.current = ActiveInput.from),\n  });\n\n  const toInput = useCoinInput({\n    coin: coinTo,\n    onChangeCoin: (coin: Coin) => setCoins([coin, coinTo]),\n    onInput: () => (activeInput.current = ActiveInput.to),\n  });\n\n  useEffect(() => {\n    onChange?.({\n      from: coinFrom.assetId,\n      to: coinTo.assetId,\n      amount:\n        activeInput.current === ActiveInput.from\n          ? fromInput.amount\n          : toInput.amount,\n      direction: activeInput.current,\n    });\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [fromInput.amount, toInput.amount, coinFrom, coinTo]);\n\n  useEffect(() => {\n    if (previewValue == null) return;\n    if (activeInput.current === ActiveInput.from) {\n      toInput.setAmount(previewValue);\n    } else {\n      fromInput.setAmount(previewValue);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [previewValue]);\n\n  return (\n    <>\n      <div className=\"mt-4\">\n        <CoinInput\n          {...fromInput.getInputProps()}\n          autoFocus\n          coinSelectorDisabled={true}\n        />\n      </div>\n      <div className={style.switchDirection}>\n        <InvertButton onClick={handleInvertCoins} />\n      </div>\n      <div className=\"mb-4\">\n        <CoinInput {...toInput.getInputProps()} coinSelectorDisabled={true} />\n      </div>\n    </>\n  );\n}\n","import { useMutation, useQuery } from \"react-query\";\nimport { useNavigate } from \"react-router-dom\";\nimport { MdSwapCalls } from \"react-icons/md\";\nimport { useState } from \"react\";\nimport toast from \"react-hot-toast\";\n\nimport { Button } from \"src/components/Button\";\nimport { PageContent } from \"src/components/PageContent\";\nimport { useContract } from \"src/context/AppContext\";\nimport useDebounce from \"src/hooks/useDebounce\";\nimport { Pages } from \"src/types/pages\";\nimport { sleep } from \"src/lib/utils\";\n\nimport { queryPreviewAmount, swapTokens } from \"./queries\";\nimport { SwapComponent } from \"./SwapComponent\";\nimport { SwapState } from \"./types\";\n\nexport default function SwapPage() {\n  const contract = useContract()!;\n  const [previewAmount, setPreviewAmount] = useState<bigint | null>(null);\n  const [swapState, setSwapState] = useState<SwapState | null>(null);\n  const [hasLiquidity, setHasLiquidity] = useState(true);\n  const debouncedState = useDebounce(swapState);\n  const navigate = useNavigate();\n\n  const { isLoading } = useQuery(\n    [\n      \"SwapPage-inactiveAmount\",\n      debouncedState?.amount?.toString(),\n      debouncedState?.direction,\n      debouncedState?.from,\n      debouncedState?.to,\n    ],\n    async () => {\n      if (!debouncedState) return null;\n      return queryPreviewAmount(contract, debouncedState);\n    },\n    {\n      onSuccess: (value) => {\n        if (value == null) return;\n        setPreviewAmount(value.amount);\n        setHasLiquidity(value.has_liquidity);\n      },\n    }\n  );\n  const { mutate: swap, isLoading: isSwaping } = useMutation(\n    async () => {\n      if (!swapState) return;\n      await swapTokens(contract, swapState);\n      await sleep(1000);\n    },\n    {\n      onSuccess: () => {\n        toast.success(\"Swap made successfully!\");\n        navigate(Pages.wallet);\n      },\n    }\n  );\n\n  const shouldDisableButton =\n    isLoading ||\n    isSwaping ||\n    !swapState ||\n    !hasLiquidity ||\n    !previewAmount ||\n    !swapState.amount;\n\n  const getButtonText = () => {\n    if (!hasLiquidity) return \"Insufficient liquidity\";\n    if (isSwaping) return \"Loading...\";\n    return \"Swap\";\n  };\n\n  return (\n    <PageContent>\n      <PageContent.Title>\n        <MdSwapCalls className=\"text-primary-500\" />\n        Swap\n      </PageContent.Title>\n      <SwapComponent previewAmount={previewAmount} onChange={setSwapState} />\n      <Button\n        isFull\n        size=\"lg\"\n        variant=\"primary\"\n        isDisabled={shouldDisableButton}\n        onPress={() => swap()}\n      >\n        {getButtonText()}\n      </Button>\n    </PageContent>\n  );\n}\n","import { useEffect, useState } from \"react\";\n\nexport default function useDebounce<T>(value: T, delay: number = 300) {\n  const [debouncedValue, setDebouncedValue] = useState(value);\n\n  useEffect(() => {\n    const handler = setTimeout(() => {\n      setDebouncedValue(value);\n    }, delay);\n    return () => {\n      clearTimeout(handler);\n    };\n  }, [value, delay]);\n\n  return debouncedValue;\n}\n"],"names":["style","Input","forwardRef","ref","className","props","innerRef","useRef","inputProps","useTextField","mergeRefs","cx","ListItem","item","state","onAction","isDisabled","disabledKeys","has","key","isFocused","selectionManager","focusedKey","menuItemProps","useMenuItem","rendered","Menu","focusOnMount","useTreeState","selectionMode","menuProps","useMenu","useEffect","current","focus","collection","map","CustomItem","Item","CoinsListDialog","onSelect","useState","value","setValue","filtered","CoinsMetadata","coin","Boolean","length","name","toLowerCase","includes","toLocaleLowerCase","hasResults","type","placeholder","onChange","src","img","alt","height","width","symbol","assetId","CoinSelector","isReadOnly","selected","setSelected","dialog","useDialogProps","Button","openButtonProps","size","Dialog","dialogProps","close","parseValueBigInt","_value","parseValue","parseUnits","DECIMAL_UNITS","toBigInt","formatValue","amount","formatUnits","useCoinInput","initialAmount","showBalance","gasFee","onInput","params","setAmount","opts","wallet","useWallet","useQuery","getBalances","useBalances","enabled","balances","data","coinBalance","find","getSafeMaxBalance","BigInt","formatted","getInputProps","displayType","val","next","isAllowed","setMaxBalance","balance","showMaxButton","hasEnoughBalance","CoinInput","initialValue","onChangeCoin","coinSelectorDisabled","autoFocus","getInputRef","allowNegative","defaultValue","e","target","decimalScale","thousandSeparator","onPress","variant","PageContent","children","title","Children","child","id","customChildren","filter","classNames","PageTitle","elementRight","Title","TOKEN_ID","CONTRACT_ID","objectId","sleep","ms","Promise","resolve","setTimeout","ActiveInput","getSwapWithMaximumRequiredAmount","contract","callStatic","get_swap_with_maximum","forward","requiredAmount","getSwapWithMinimumMinAmount","get_swap_with_minimum","minAmount","queryPreviewAmount","direction","from","to","previewAmount","swapTokens","DEADLINE","forwardAmount","has_liquidity","Error","functions","swap_with_maximum","variableOutputs","minValue","swap_with_minimum","InvertButton","onClick","isInverted","setInverted","s","SwapComponent","previewValue","activeInput","assets","coinFrom","coinTo","setCoins","fromInput","toInput","SwapPage","useContract","setPreviewAmount","swapState","setSwapState","hasLiquidity","setHasLiquidity","debouncedState","delay","debouncedValue","setDebouncedValue","handler","clearTimeout","useDebounce","navigate","useNavigate","isLoading","toString","onSuccess","useMutation","toast","Pages","swap","mutate","isSwaping","shouldDisableButton","isFull"],"sourceRoot":""}