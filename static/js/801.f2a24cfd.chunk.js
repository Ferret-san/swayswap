"use strict";(self.webpackChunkswayswap_demo=self.webpackChunkswayswap_demo||[]).push([[801],{9909:function(e,n,t){t.d(n,{_:function(){return G},M:function(){return V}});var a=t(1413),r=t(885),s=t(4925),o=t(612),i=t(3580),u=t(2791),l=t(948),c=t(9478),d=t(3853),f=t(5479),m=t(3426),v=t(401),x=t(1694),h=t.n(x),p=t(3599),g=t(184),y=["className"],b="appearance-none w-full rounded-md bg-gray-700 px-4 py-2 focus-ring text-gray-100",Z=(0,u.forwardRef)((function(e,n){var t=e.className,r=(0,s.Z)(e,y),o=(0,u.useRef)(null),i=(0,v.E)(r,o).inputProps;return(0,g.jsx)("input",(0,a.Z)({ref:(0,p.Z)([o,n]),className:h()(t,b)},i))})),w=t(2982),j=t(7965),N=t(6367),I=t(686),B=["className","onAction","focusOnMount"];function S(e){var n=e.item,t=e.state,r=e.onAction,s=e.className,o=(0,u.useRef)(null),i=t.disabledKeys.has(n.key),l=t.selectionManager.focusedKey===n.key,c=(0,j.iX)({key:n.key,isDisabled:i,onAction:r},t,o).menuItemProps;return(0,g.jsx)("li",(0,a.Z)((0,a.Z)({},c),{},{ref:o,className:s,"data-focused":l,children:n.rendered}))}var k=function(e){var n=e.className,t=e.onAction,r=e.focusOnMount,o=(0,s.Z)(e,B),i=(0,N.D)((0,a.Z)((0,a.Z)({},o),{},{selectionMode:"none"})),l=(0,u.useRef)(null),c=(0,j.H9)(o,i,l).menuProps;return(0,u.useEffect)((function(){var e;r&&(null===(e=l.current)||void 0===e||e.focus())}),[]),(0,g.jsx)("ul",(0,a.Z)((0,a.Z)({},c),{},{ref:l,className:n,children:(0,w.Z)(i.collection).map((function(e){return(0,g.jsx)(S,{className:e.props.className,item:e,state:i,onAction:t},e.key)}))}))},P=I.ck;k.Item=P;var A="py-2 px-6 flex items-center gap-3 border-t border-gray-700\n  hover:bg-gray-700/50 hover:cursor-pointer focus-ring",R="px-6 py-4 border-t border-gray-700";function C(e){var n=e.onSelect,t=(0,u.useState)(""),a=(0,r.Z)(t,2),s=a[0],o=a[1];var i=f.Z.filter((function(e){var n;return Boolean(s.length)?null===(n=e.name)||void 0===n?void 0:n.toLowerCase().includes(s.toLocaleLowerCase()):e})),l=Boolean(i.length);return(0,g.jsxs)("div",{children:[(0,g.jsxs)("header",{className:"py-4 px-6 pb-5",children:[(0,g.jsx)("h2",{className:"text-gray-50 text-lg mb-3",children:"Select a token"}),(0,g.jsx)(Z,{type:"text",placeholder:"Search by name...",value:s,onChange:o})]}),l?(0,g.jsx)(k,{onAction:function(e){return null===n||void 0===n?void 0:n(e)},className:"pb-2",focusOnMount:!0,children:i.map((function(e){return(0,g.jsxs)(k.Item,{className:A,children:[(0,g.jsx)("img",{className:"rounded-full border-none ml-1",src:e.img,alt:e.name,height:30,width:30}),(0,g.jsxs)("div",{className:"flex flex-col",children:[(0,g.jsx)("div",{className:"text-gray-50",children:e.symbol}),(0,g.jsx)("div",{className:"text-sm",children:e.name})]})]},e.assetId)}))}):(0,g.jsx)("div",{className:R,children:"\ud83d\ude22 Oops, no token found!"})]})}var E=t(4243),M="flex1";function O(e){var n=e.value,t=(e.onChange,e.isReadOnly),s=(0,u.useState)(null),o=(0,r.Z)(s,2),i=o[0],l=o[1],c=(0,E.E)();return(0,u.useEffect)((function(){if(!n)return l(null);l(n)}),[n]),(0,g.jsxs)("div",{className:M,children:[(0,g.jsxs)(m.z,(0,a.Z)((0,a.Z)({},c.openButtonProps),{},{size:"md",className:"coin-selector",isDisabled:t,children:[i&&i.img&&(0,g.jsx)("img",{className:"rounded-full border-none ml-1",src:i.img,alt:i.name,height:20,width:20}),(0,g.jsx)("div",{className:"ml-2",children:null===i||void 0===i?void 0:i.name}),!t&&(0,g.jsx)(d.bTu,{className:"text-gray-500"})]})),(0,g.jsx)(E.V,(0,a.Z)((0,a.Z)({},c.dialogProps),{},{children:(0,g.jsx)(E.V.Content,{children:(0,g.jsx)(C,{onSelect:function(e){c.close(),l(f.Z.find((function(n){return n.assetId===e})))}})})}))]})}var _=t(1933),D=t(3246);var F=["amount","onChange","isReadOnly","showBalance","coin","gasFee","onInput"],H="flex bg-gray-700 rounded-2xl p-2 border border-gray-700",L="mx-2 h-10 bg-transparent placeholder:text-gray-300 outline-none text-xl flex items-center",T="flex flex-1 flex-col items-end",q="text-xs py-0 px-1 h-auto bg-primary-800/60 text-primary-500 hover:bg-primary-800",z=function(e){if(""!==e){var n=function(e){return"."===e?"0.":e}(e);return(0,i.parseUnits)(n,c.cS).toBigInt()}return(0,o.Gh)(0)},U=function(e){return null!=e?(0,i.formatUnits)(e,c.cS):e?void 0:""};function V(e){var n=e.amount,t=e.onChange,o=e.isReadOnly,i=e.showBalance,l=void 0===i||i,c=e.coin,d=e.gasFee,f=e.onInput,m=(0,s.Z)(e,F),v=(0,u.useState)(null),x=(0,r.Z)(v,2),h=x[0],p=x[1],g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=(0,D.Os)();return(0,_.useQuery)("AssetsPage-balances",(function(){return n.getBalances()}),e)}({enabled:l}),y=g.data,b=null===y||void 0===y?void 0:y.find((function(e){return e.assetId===(null===c||void 0===c?void 0:c.assetId)}));function Z(){var e=(null===b||void 0===b?void 0:b.amount)||BigInt(0);return e>BigInt(0)?e-(d||BigInt(0)):e}return(0,u.useEffect)((function(){null!=n&&p(n)}),[n]),{amount:h,formatted:U(h),setAmount:p,getInputProps:function(){return(0,a.Z)((0,a.Z)({},m),{},{coin:c,isReadOnly:o,value:U(h),displayType:o?"text":"input",onInput:f,onChange:function(e){if(!o){var n=""!==e?z(e):null;"function"===typeof t?t(n):p(n)}},isAllowed:function(e){var n=e.value;return z(n)<=0x10000000000000000},setMaxBalance:function(){null===f||void 0===f||f(),p(Z())},balance:U((null===b||void 0===b?void 0:b.amount)||BigInt(0)),showBalance:l,showMaxButton:l})},hasEnoughBalance:Z()>=(h||BigInt(0))}}var G=(0,u.forwardRef)((function(e,n){var t=e.value,a=e.displayType,s=e.onChange,o=e.coin,i=e.isAllowed,d=e.onChangeCoin,f=e.onInput,v=e.isReadOnly,x=e.coinSelectorDisabled,h=e.showMaxButton,p=e.showBalance,y=e.setMaxBalance,b=e.balance,Z=e.autoFocus,w=(0,u.useState)(t),j=(0,r.Z)(w,2),N=j[0],I=j[1];return(0,u.useEffect)((function(){t&&I(t)}),[t]),(0,g.jsxs)("div",{className:H,children:[(0,g.jsx)(l.Z,{autoFocus:Z,getInputRef:n,allowNegative:!1,defaultValue:t,value:N,displayType:a,isAllowed:i,onChange:function(e){null===s||void 0===s||s(e.target.value),I(e.target.value)},decimalScale:c.cS,placeholder:"0",className:L,thousandSeparator:!1,onInput:f}),(0,g.jsxs)("div",{className:T,children:[(0,g.jsx)(O,{value:o,onChange:d,isReadOnly:v||x}),(p||h)&&(0,g.jsxs)("div",{className:"flex items-center gap-2 mt-2",children:[p&&(0,g.jsxs)("div",{className:"text-xs text-gray-400",children:["Balance: ",b]}),h&&(0,g.jsx)(m.z,{size:"sm",onPress:y,className:q,variant:"ghost",children:"Max"})]})]})]})}))},629:function(e,n,t){t.d(n,{r:function(){return d}});var a=t(1413),r=t(4925),s=t(7586),o=t(2791),i=t(1694),u=t.n(i),l=t(184),c=["href","isExternal","className","children"];function d(e){var n=e.href,t=e.isExternal,i=e.className,d=e.children,f=(0,r.Z)(e,c),m=(0,o.useRef)(null),v=(0,s.U)((0,a.Z)((0,a.Z)({},f),{},{elementType:"a"}),m),x=v.buttonProps,h=v.isPressed;return(0,l.jsx)("a",(0,a.Z)((0,a.Z)((0,a.Z)((0,a.Z)({},x),n&&{href:n}),{},{ref:m,className:u()(i,"link"),"data-pressed":h},t&&{target:"_blank",rel:"noopener noreferrer"}),{},{children:d}))}},5479:function(e,n,t){t.d(n,{P:function(){return s}});var a=t(9478),r=t(5442),s={name:"404",img:(0,r.Hn)("/icons/other.svg")},o=[{name:"Ether",symbol:"ETH",assetId:"0x0000000000000000000000000000000000000000000000000000000000000000",img:(0,r.Hn)("/icons/eth.svg")},{name:"DAI",symbol:"DAI",assetId:a.Bb,img:(0,r.Hn)("/icons/dai.svg")},{name:"Sway",symbol:"SWAY",assetId:a.p_,img:(0,r.Hn)("/icons/sway.svg")}];n.Z=o},5442:function(e,n,t){t.d(n,{Hn:function(){return i},_v:function(){return o},xr:function(){return s}});var a=t(6231),r=t.n(a),s=function(e){return{value:e}},o=function(e){return new Promise((function(n){return setTimeout(n,e)}))},i=function(e){return r()("/swayswap",e)}},4801:function(e,n,t){t.r(n),t.d(n,{default:function(){return b}});var a=t(1413),r=t(5861),s=t(7757),o=t.n(s),i=t(3580),u=t(612),l=t(1933),c=t(6871),d=t(6140),f=t(3426),m=t(9909),v=t(9478),x=t(629),h=t(6861),p=t(5479),g=t(3246),y=t(184);function b(){var e=(0,g.Os)(),n=(0,g.cq)(),t=(0,c.s0)(),s=p.Z.find((function(e){return e.assetId===v.p_})),b=(0,m.M)({coin:s}),Z=b.amount,w=(0,l.useQuery)("RemoveLiquidityPage-balance",(0,r.Z)(o().mark((function n(){var t,a;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.getBalances();case 2:return t=n.sent,a=t.find((function(e){return e.assetId===v.p_})),n.abrupt("return",{amount:(0,u.Gh)((null===a||void 0===a?void 0:a.amount)||0),formatted:a?(0,i.formatUnits)(null===a||void 0===a?void 0:a.amount,v.cS):"0"});case 5:case"end":return n.stop()}}),n)})))).data,j=(0,l.useMutation)((0,r.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Z){e.next=2;break}throw new Error('"amount" is required');case 2:if(!(Z>(null===w||void 0===w?void 0:w.amount))){e.next=4;break}throw new Error("Amount is bigger them the current balance!");case 4:return e.next=6,n.functions.remove_liquidity(1,1,1e3,{forward:[Z,v.p_],variableOutputs:2});case 6:case"end":return e.stop()}}),e)}))),{onSuccess:function(){d.ZP.success("Liquidity removed successfully!"),t(h.i.wallet)},onError:function(e){d.ZP.error(e.message)}});return s?(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)("div",{className:"mt-4 mb-4",children:[(0,y.jsx)(m._,(0,a.Z)((0,a.Z)({},b.getInputProps()),{},{autoFocus:!0,coinSelectorDisabled:!0})),(0,y.jsxs)(x.r,{className:"inline-flex mt-2 ml-2",onPress:function(){return b.setAmount(null===w||void 0===w?void 0:w.amount)},children:["Max amount: ",(null===w||void 0===w?void 0:w.formatted)||"..."]})]}),(0,y.jsx)(f.z,{isFull:!0,size:"lg",variant:"primary",onPress:function(){return j.mutate()},isDisabled:!Z||!w||Z>w.amount||j.isLoading,children:j.isLoading?"Removing...":"Remove liquidity"})]}):null}}}]);
//# sourceMappingURL=801.f2a24cfd.chunk.js.map