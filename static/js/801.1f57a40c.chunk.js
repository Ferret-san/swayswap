"use strict";(self.webpackChunkswayswap_demo=self.webpackChunkswayswap_demo||[]).push([[801],{9909:function(e,n,a){a.d(n,{_:function(){return H},M:function(){return G}});var t=a(1413),s=a(885),r=a(4925),o=a(612),i=a(3580),l=a(2791),u=a(948),c=a(9478),d=a(3853),m=a(5479),f=a(3426),v=a(401),x=a(1694),h=a.n(x),p=a(3599),g=a(184),y=["className"],b="appearance-none w-full rounded-md bg-gray-700 px-4 py-2 focus-ring text-gray-100",Z=(0,l.forwardRef)((function(e,n){var a=e.className,s=(0,r.Z)(e,y),o=(0,l.useRef)(null),i=(0,v.E)(s,o).inputProps;return(0,g.jsx)("input",(0,t.Z)({ref:(0,p.Z)([o,n]),className:h()(a,b)},i))})),j=a(2982),N=a(7965),w=a(6367),I=a(686),B=["className","onAction","focusOnMount"];function S(e){var n=e.item,a=e.state,s=e.onAction,r=e.className,o=(0,l.useRef)(null),i=a.disabledKeys.has(n.key),u=a.selectionManager.focusedKey===n.key,c=(0,N.iX)({key:n.key,isDisabled:i,onAction:s},a,o).menuItemProps;return(0,g.jsx)("li",(0,t.Z)((0,t.Z)({},c),{},{ref:o,className:r,"data-focused":u,children:n.rendered}))}var k=function(e){var n=e.className,a=e.onAction,s=e.focusOnMount,o=(0,r.Z)(e,B),i=(0,w.D)((0,t.Z)((0,t.Z)({},o),{},{selectionMode:"none"})),u=(0,l.useRef)(null),c=(0,N.H9)(o,i,u).menuProps;return(0,l.useEffect)((function(){var e;s&&(null===(e=u.current)||void 0===e||e.focus())}),[]),(0,g.jsx)("ul",(0,t.Z)((0,t.Z)({},c),{},{ref:u,className:n,children:(0,j.Z)(i.collection).map((function(e){return(0,g.jsx)(S,{className:e.props.className,item:e,state:i,onAction:a},e.key)}))}))},A=I.ck;k.Item=A;var P="py-2 px-6 flex items-center gap-3 border-t border-gray-700\n  hover:bg-gray-700/50 hover:cursor-pointer focus-ring",R="px-6 py-4 border-t border-gray-700";function C(e){var n=e.onSelect,a=(0,l.useState)(""),t=(0,s.Z)(a,2),r=t[0],o=t[1];var i=m.Z.filter((function(e){var n;return Boolean(r.length)?null===(n=e.name)||void 0===n?void 0:n.toLowerCase().includes(r.toLocaleLowerCase()):e})),u=Boolean(i.length);return(0,g.jsxs)("div",{children:[(0,g.jsxs)("header",{className:"py-4 px-6 pb-5",children:[(0,g.jsx)("h2",{className:"text-gray-50 text-lg mb-3",children:"Select a token"}),(0,g.jsx)(Z,{type:"text",placeholder:"Search by name...",value:r,onChange:o})]}),u?(0,g.jsx)(k,{onAction:function(e){return null===n||void 0===n?void 0:n(e)},className:"pb-2",focusOnMount:!0,children:i.map((function(e){return(0,g.jsxs)(k.Item,{className:P,children:[(0,g.jsx)("img",{className:"rounded-full border-none ml-1",src:e.img,alt:e.name,height:30,width:30}),(0,g.jsxs)("div",{className:"flex flex-col",children:[(0,g.jsx)("div",{className:"text-gray-50",children:e.symbol}),(0,g.jsx)("div",{className:"text-sm",children:e.name})]})]},e.assetId)}))}):(0,g.jsx)("div",{className:R,children:"\ud83d\ude22 Oops, no token found!"})]})}var E=a(4243),M="flex1";function O(e){var n=e.value,a=(e.onChange,e.isReadOnly),r=(0,l.useState)(null),o=(0,s.Z)(r,2),i=o[0],u=o[1],c=(0,E.E)();return(0,l.useEffect)((function(){if(!n)return u(null);u(n)}),[n]),(0,g.jsxs)("div",{className:M,children:[(0,g.jsxs)(f.z,(0,t.Z)((0,t.Z)({},c.openButtonProps),{},{size:"md",className:"coin-selector",isDisabled:a,children:[i&&i.img&&(0,g.jsx)("img",{className:"rounded-full border-none ml-1",src:i.img,alt:i.name,height:20,width:20}),(0,g.jsx)("div",{className:"ml-2",children:null===i||void 0===i?void 0:i.name}),!a&&(0,g.jsx)(d.bTu,{className:"text-gray-500"})]})),(0,g.jsx)(E.V,(0,t.Z)((0,t.Z)({},c.dialogProps),{},{children:(0,g.jsx)(E.V.Content,{children:(0,g.jsx)(C,{onSelect:function(e){c.close(),u(m.Z.find((function(n){return n.assetId===e})))}})})}))]})}var _=a(1933),D=a(3246);var F=["amount","onChange","isReadOnly","showBalance","coin","gasFee","onInput"],L="flex bg-gray-700 rounded-2xl p-2 border border-gray-700",q="mx-2 h-10 bg-transparent placeholder:text-gray-300 outline-none text-xl flex items-center",z="flex flex-1 flex-col items-end",T="text-xs py-0 px-1 h-auto bg-primary-800/60 text-primary-500 hover:bg-primary-800",U=function(e){if(""!==e){var n=function(e){return"."===e?"0.":e}(e);return(0,i.parseUnits)(n,c.cS).toBigInt()}return(0,o.Gh)(0)},V=function(e){return null!=e?(0,i.formatUnits)(e,c.cS):e?void 0:""};function G(e){var n=e.amount,a=e.onChange,o=e.isReadOnly,i=e.showBalance,u=void 0===i||i,c=e.coin,d=e.gasFee,m=e.onInput,f=(0,r.Z)(e,F),v=(0,l.useState)(null),x=(0,s.Z)(v,2),h=x[0],p=x[1],g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=(0,D.Os)();return(0,_.useQuery)("AssetsPage-balances",(function(){return n.getBalances()}),e)}({enabled:u}),y=g.data,b=null===y||void 0===y?void 0:y.find((function(e){return e.assetId===(null===c||void 0===c?void 0:c.assetId)}));function Z(){var e=(null===b||void 0===b?void 0:b.amount)||BigInt(0);return e>BigInt(0)?e-(d||BigInt(0)):e}return(0,l.useEffect)((function(){null!=n&&p(n)}),[n]),{amount:h,formatted:V(h),setAmount:p,getInputProps:function(){return(0,t.Z)((0,t.Z)({},f),{},{coin:c,isReadOnly:o,value:V(h),displayType:o?"text":"input",onInput:m,onChange:function(e){if(!o){var n=""!==e?U(e):null;"function"===typeof a?a(n):p(n)}},isAllowed:function(e){var n=e.value;return U(n)<=0x10000000000000000},setMaxBalance:function(){null===m||void 0===m||m(),p(Z())},balance:V((null===b||void 0===b?void 0:b.amount)||BigInt(0)),showBalance:u,showMaxButton:u})},hasEnoughBalance:Z()>=(h||BigInt(0))}}var H=(0,l.forwardRef)((function(e,n){var a=e.value,t=e.displayType,r=e.onChange,o=e.coin,i=e.isAllowed,d=e.onChangeCoin,m=e.onInput,v=e.isReadOnly,x=e.coinSelectorDisabled,h=e.showMaxButton,p=e.showBalance,y=e.setMaxBalance,b=e.balance,Z=e.autoFocus,j=(0,l.useState)(a),N=(0,s.Z)(j,2),w=N[0],I=N[1];return(0,l.useEffect)((function(){a&&I(a)}),[a]),(0,g.jsxs)("div",{className:L,children:[(0,g.jsx)(u.Z,{autoFocus:Z,getInputRef:n,allowNegative:!1,defaultValue:a,value:w,displayType:t,isAllowed:i,onChange:function(e){null===r||void 0===r||r(e.target.value),I(e.target.value)},decimalScale:c.cS,placeholder:"0",className:q,thousandSeparator:!1,onInput:m}),(0,g.jsxs)("div",{className:z,children:[(0,g.jsx)(O,{value:o,onChange:d,isReadOnly:v||x}),(p||h)&&(0,g.jsxs)("div",{className:"flex items-center gap-2 mt-2",children:[p&&(0,g.jsxs)("div",{className:"text-xs text-gray-400",children:["Balance: ",b]}),h&&(0,g.jsx)(f.z,{size:"sm",onPress:y,className:T,variant:"ghost",children:"Max"})]})]})]})}))},629:function(e,n,a){a.d(n,{r:function(){return d}});var t=a(1413),s=a(4925),r=a(7586),o=a(2791),i=a(1694),l=a.n(i),u=a(184),c=["href","isExternal","className","children"];function d(e){var n=e.href,a=e.isExternal,i=e.className,d=e.children,m=(0,s.Z)(e,c),f=(0,o.useRef)(null),v=(0,r.U)((0,t.Z)((0,t.Z)({},m),{},{elementType:"a"}),f),x=v.buttonProps,h=v.isPressed;return(0,u.jsx)("a",(0,t.Z)((0,t.Z)((0,t.Z)((0,t.Z)({},x),n&&{href:n}),{},{ref:f,className:l()(i,"link"),"data-pressed":h},a&&{target:"_blank",rel:"noopener noreferrer"}),{},{children:d}))}},5479:function(e,n,a){var t=a(9478),s=[{name:"Ether",symbol:"ETH",assetId:"0x0000000000000000000000000000000000000000000000000000000000000000",img:"/icons/eth.svg"},{name:"DAI",symbol:"DAI",assetId:t.Bb,img:"/icons/dai.svg"},{name:"Sway",symbol:"SWAY",assetId:t.p_,img:"/icons/sway.svg"}];n.Z=s},4801:function(e,n,a){a.r(n),a.d(n,{default:function(){return b}});var t=a(1413),s=a(5861),r=a(7757),o=a.n(r),i=a(3580),l=a(612),u=a(1933),c=a(6871),d=a(6140),m=a(3426),f=a(9909),v=a(9478),x=a(629),h=a(6861),p=a(5479),g=a(3246),y=a(184);function b(){var e=(0,g.Os)(),n=(0,g.cq)(),a=(0,c.s0)(),r=p.Z.find((function(e){return e.assetId===v.p_})),b=(0,f.M)({coin:r}),Z=b.amount,j=(0,u.useQuery)("RemoveLiquidityPage-balance",(0,s.Z)(o().mark((function n(){var a,t;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.getBalances();case 2:return a=n.sent,t=a.find((function(e){return e.assetId===v.p_})),n.abrupt("return",{amount:(0,l.Gh)((null===t||void 0===t?void 0:t.amount)||0),formatted:t?(0,i.formatUnits)(null===t||void 0===t?void 0:t.amount,v.cS):"0"});case 5:case"end":return n.stop()}}),n)})))).data,N=(0,u.useMutation)((0,s.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Z){e.next=2;break}throw new Error('"amount" is required');case 2:if(!(Z>(null===j||void 0===j?void 0:j.amount))){e.next=4;break}throw new Error("Amount is bigger them the current balance!");case 4:return e.next=6,n.functions.remove_liquidity(1,1,1e3,{forward:[Z,v.p_],variableOutputs:2});case 6:case"end":return e.stop()}}),e)}))),{onSuccess:function(){d.ZP.success("Liquidity removed successfully!"),a(h.i.wallet)},onError:function(e){d.ZP.error(e.message)}});return r?(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)("div",{className:"mt-4 mb-4",children:[(0,y.jsx)(f._,(0,t.Z)((0,t.Z)({},b.getInputProps()),{},{autoFocus:!0,coinSelectorDisabled:!0})),(0,y.jsxs)(x.r,{className:"inline-flex mt-2 ml-2",onPress:function(){return b.setAmount(null===j||void 0===j?void 0:j.amount)},children:["Max amount: ",(null===j||void 0===j?void 0:j.formatted)||"..."]})]}),(0,y.jsx)(m.z,{isFull:!0,size:"lg",variant:"primary",onPress:function(){return N.mutate()},isDisabled:!Z||!j||Z>j.amount||N.isLoading,children:N.isLoading?"Removing...":"Remove liquidity"})]}):null}}}]);
//# sourceMappingURL=801.1f57a40c.chunk.js.map