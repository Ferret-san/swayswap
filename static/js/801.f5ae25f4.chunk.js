"use strict";(self.webpackChunkswayswap_demo=self.webpackChunkswayswap_demo||[]).push([[801],{9909:function(e,n,a){a.d(n,{_:function(){return Q},M:function(){return K}});var t=a(1413),s=a(885),r=a(4925),o=a(612),i=a(3580),l=a(2791),u=a(948),c=a(9478),d=a(3853),m=a(5479),f=a(6231),v=a.n(f),x=a(3426),h=a(401),p=a(1694),g=a.n(p),y=a(3599),b=a(184),Z=["className"],w="appearance-none w-full rounded-md bg-gray-700 px-4 py-2 focus-ring text-gray-100",j=(0,l.forwardRef)((function(e,n){var a=e.className,s=(0,r.Z)(e,Z),o=(0,l.useRef)(null),i=(0,h.E)(s,o).inputProps;return(0,b.jsx)("input",(0,t.Z)({ref:(0,y.Z)([o,n]),className:g()(a,w)},i))})),N=a(2982),I=a(7965),B=a(6367),S=a(686),k=["className","onAction","focusOnMount"];function A(e){var n=e.item,a=e.state,s=e.onAction,r=e.className,o=(0,l.useRef)(null),i=a.disabledKeys.has(n.key),u=a.selectionManager.focusedKey===n.key,c=(0,I.iX)({key:n.key,isDisabled:i,onAction:s},a,o).menuItemProps;return(0,b.jsx)("li",(0,t.Z)((0,t.Z)({},c),{},{ref:o,className:r,"data-focused":u,children:n.rendered}))}var P=function(e){var n=e.className,a=e.onAction,s=e.focusOnMount,o=(0,r.Z)(e,k),i=(0,B.D)((0,t.Z)((0,t.Z)({},o),{},{selectionMode:"none"})),u=(0,l.useRef)(null),c=(0,I.H9)(o,i,u).menuProps;return(0,l.useEffect)((function(){var e;s&&(null===(e=u.current)||void 0===e||e.focus())}),[]),(0,b.jsx)("ul",(0,t.Z)((0,t.Z)({},c),{},{ref:u,className:n,children:(0,N.Z)(i.collection).map((function(e){return(0,b.jsx)(A,{className:e.props.className,item:e,state:i,onAction:a},e.key)}))}))},R=S.ck;P.Item=R;var C="py-2 px-6 flex items-center gap-3 border-t border-gray-700\n  hover:bg-gray-700/50 hover:cursor-pointer focus-ring",E="px-6 py-4 border-t border-gray-700";function M(e){var n=e.onSelect,a=(0,l.useState)(""),t=(0,s.Z)(a,2),r=t[0],o=t[1];var i=m.Z.filter((function(e){var n;return Boolean(r.length)?null===(n=e.name)||void 0===n?void 0:n.toLowerCase().includes(r.toLocaleLowerCase()):e})),u=Boolean(i.length);return(0,b.jsxs)("div",{children:[(0,b.jsxs)("header",{className:"py-4 px-6 pb-5",children:[(0,b.jsx)("h2",{className:"text-gray-50 text-lg mb-3",children:"Select a token"}),(0,b.jsx)(j,{type:"text",placeholder:"Search by name...",value:r,onChange:o})]}),u?(0,b.jsx)(P,{onAction:function(e){return null===n||void 0===n?void 0:n(e)},className:"pb-2",focusOnMount:!0,children:i.map((function(e){return(0,b.jsxs)(P.Item,{className:C,children:[(0,b.jsx)("img",{className:"rounded-full border-none ml-1",src:"/".concat(v()("/swayswap",e.img)),alt:e.name,height:30,width:30}),(0,b.jsxs)("div",{className:"flex flex-col",children:[(0,b.jsx)("div",{className:"text-gray-50",children:e.symbol}),(0,b.jsx)("div",{className:"text-sm",children:e.name})]})]},e.assetId)}))}):(0,b.jsx)("div",{className:E,children:"\ud83d\ude22 Oops, no token found!"})]})}var O=a(4243),_="flex1";function D(e){var n=e.value,a=(e.onChange,e.isReadOnly),r=(0,l.useState)(null),o=(0,s.Z)(r,2),i=o[0],u=o[1],c=(0,O.E)();return(0,l.useEffect)((function(){if(!n)return u(null);u(n)}),[n]),(0,b.jsxs)("div",{className:_,children:[(0,b.jsxs)(x.z,(0,t.Z)((0,t.Z)({},c.openButtonProps),{},{size:"md",className:"coin-selector",isDisabled:a,children:[i&&i.img&&(0,b.jsx)("img",{className:"rounded-full border-none ml-1",src:"/".concat(v()("/swayswap",i.img)),alt:i.name,height:20,width:20}),(0,b.jsx)("div",{className:"ml-2",children:null===i||void 0===i?void 0:i.name}),!a&&(0,b.jsx)(d.bTu,{className:"text-gray-500"})]})),(0,b.jsx)(O.V,(0,t.Z)((0,t.Z)({},c.dialogProps),{},{children:(0,b.jsx)(O.V.Content,{children:(0,b.jsx)(M,{onSelect:function(e){c.close(),u(m.Z.find((function(n){return n.assetId===e})))}})})}))]})}var F=a(1933),L=a(3246);var q=["amount","onChange","isReadOnly","showBalance","coin","gasFee","onInput"],z="flex bg-gray-700 rounded-2xl p-2 border border-gray-700",T="mx-2 h-10 bg-transparent placeholder:text-gray-300 outline-none text-xl flex items-center",U="flex flex-1 flex-col items-end",V="text-xs py-0 px-1 h-auto bg-primary-800/60 text-primary-500 hover:bg-primary-800",G=function(e){if(""!==e){var n=function(e){return"."===e?"0.":e}(e);return(0,i.parseUnits)(n,c.cS).toBigInt()}return(0,o.Gh)(0)},H=function(e){return null!=e?(0,i.formatUnits)(e,c.cS):e?void 0:""};function K(e){var n=e.amount,a=e.onChange,o=e.isReadOnly,i=e.showBalance,u=void 0===i||i,c=e.coin,d=e.gasFee,m=e.onInput,f=(0,r.Z)(e,q),v=(0,l.useState)(null),x=(0,s.Z)(v,2),h=x[0],p=x[1],g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=(0,L.Os)();return(0,F.useQuery)("AssetsPage-balances",(function(){return n.getBalances()}),e)}({enabled:u}),y=g.data,b=null===y||void 0===y?void 0:y.find((function(e){return e.assetId===(null===c||void 0===c?void 0:c.assetId)}));function Z(){var e=(null===b||void 0===b?void 0:b.amount)||BigInt(0);return e>BigInt(0)?e-(d||BigInt(0)):e}return(0,l.useEffect)((function(){null!=n&&p(n)}),[n]),{amount:h,formatted:H(h),setAmount:p,getInputProps:function(){return(0,t.Z)((0,t.Z)({},f),{},{coin:c,isReadOnly:o,value:H(h),displayType:o?"text":"input",onInput:m,onChange:function(e){if(!o){var n=""!==e?G(e):null;"function"===typeof a?a(n):p(n)}},isAllowed:function(e){var n=e.value;return G(n)<=0x10000000000000000},setMaxBalance:function(){null===m||void 0===m||m(),p(Z())},balance:H((null===b||void 0===b?void 0:b.amount)||BigInt(0)),showBalance:u,showMaxButton:u})},hasEnoughBalance:Z()>=(h||BigInt(0))}}var Q=(0,l.forwardRef)((function(e,n){var a=e.value,t=e.displayType,r=e.onChange,o=e.coin,i=e.isAllowed,d=e.onChangeCoin,m=e.onInput,f=e.isReadOnly,v=e.coinSelectorDisabled,h=e.showMaxButton,p=e.showBalance,g=e.setMaxBalance,y=e.balance,Z=e.autoFocus,w=(0,l.useState)(a),j=(0,s.Z)(w,2),N=j[0],I=j[1];return(0,l.useEffect)((function(){a&&I(a)}),[a]),(0,b.jsxs)("div",{className:z,children:[(0,b.jsx)(u.Z,{autoFocus:Z,getInputRef:n,allowNegative:!1,defaultValue:a,value:N,displayType:t,isAllowed:i,onChange:function(e){null===r||void 0===r||r(e.target.value),I(e.target.value)},decimalScale:c.cS,placeholder:"0",className:T,thousandSeparator:!1,onInput:m}),(0,b.jsxs)("div",{className:U,children:[(0,b.jsx)(D,{value:o,onChange:d,isReadOnly:f||v}),(p||h)&&(0,b.jsxs)("div",{className:"flex items-center gap-2 mt-2",children:[p&&(0,b.jsxs)("div",{className:"text-xs text-gray-400",children:["Balance: ",y]}),h&&(0,b.jsx)(x.z,{size:"sm",onPress:g,className:V,variant:"ghost",children:"Max"})]})]})]})}))},629:function(e,n,a){a.d(n,{r:function(){return d}});var t=a(1413),s=a(4925),r=a(7586),o=a(2791),i=a(1694),l=a.n(i),u=a(184),c=["href","isExternal","className","children"];function d(e){var n=e.href,a=e.isExternal,i=e.className,d=e.children,m=(0,s.Z)(e,c),f=(0,o.useRef)(null),v=(0,r.U)((0,t.Z)((0,t.Z)({},m),{},{elementType:"a"}),f),x=v.buttonProps,h=v.isPressed;return(0,u.jsx)("a",(0,t.Z)((0,t.Z)((0,t.Z)((0,t.Z)({},x),n&&{href:n}),{},{ref:f,className:l()(i,"link"),"data-pressed":h},a&&{target:"_blank",rel:"noopener noreferrer"}),{},{children:d}))}},5479:function(e,n,a){var t=a(9478),s=[{name:"Ether",symbol:"ETH",assetId:"0x0000000000000000000000000000000000000000000000000000000000000000",img:"/icons/eth.svg"},{name:"DAI",symbol:"DAI",assetId:t.Bb,img:"/icons/dai.svg"},{name:"Sway",symbol:"SWAY",assetId:t.p_,img:"/icons/sway.svg"}];n.Z=s},4801:function(e,n,a){a.r(n),a.d(n,{default:function(){return b}});var t=a(1413),s=a(5861),r=a(7757),o=a.n(r),i=a(3580),l=a(612),u=a(1933),c=a(6871),d=a(6140),m=a(3426),f=a(9909),v=a(9478),x=a(629),h=a(6861),p=a(5479),g=a(3246),y=a(184);function b(){var e=(0,g.Os)(),n=(0,g.cq)(),a=(0,c.s0)(),r=p.Z.find((function(e){return e.assetId===v.p_})),b=(0,f.M)({coin:r}),Z=b.amount,w=(0,u.useQuery)("RemoveLiquidityPage-balance",(0,s.Z)(o().mark((function n(){var a,t;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.getBalances();case 2:return a=n.sent,t=a.find((function(e){return e.assetId===v.p_})),n.abrupt("return",{amount:(0,l.Gh)((null===t||void 0===t?void 0:t.amount)||0),formatted:t?(0,i.formatUnits)(null===t||void 0===t?void 0:t.amount,v.cS):"0"});case 5:case"end":return n.stop()}}),n)})))).data,j=(0,u.useMutation)((0,s.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Z){e.next=2;break}throw new Error('"amount" is required');case 2:if(!(Z>(null===w||void 0===w?void 0:w.amount))){e.next=4;break}throw new Error("Amount is bigger them the current balance!");case 4:return e.next=6,n.functions.remove_liquidity(1,1,1e3,{forward:[Z,v.p_],variableOutputs:2});case 6:case"end":return e.stop()}}),e)}))),{onSuccess:function(){d.ZP.success("Liquidity removed successfully!"),a(h.i.wallet)},onError:function(e){d.ZP.error(e.message)}});return r?(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)("div",{className:"mt-4 mb-4",children:[(0,y.jsx)(f._,(0,t.Z)((0,t.Z)({},b.getInputProps()),{},{autoFocus:!0,coinSelectorDisabled:!0})),(0,y.jsxs)(x.r,{className:"inline-flex mt-2 ml-2",onPress:function(){return b.setAmount(null===w||void 0===w?void 0:w.amount)},children:["Max amount: ",(null===w||void 0===w?void 0:w.formatted)||"..."]})]}),(0,y.jsx)(m.z,{isFull:!0,size:"lg",variant:"primary",onPress:function(){return j.mutate()},isDisabled:!Z||!w||Z>w.amount||j.isLoading,children:j.isLoading?"Removing...":"Remove liquidity"})]}):null}}}]);
//# sourceMappingURL=801.f5ae25f4.chunk.js.map