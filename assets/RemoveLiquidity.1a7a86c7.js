import{d as g,v as R,a6 as C,p as T,a7 as h,e as I,Z as P,E as L,j as u,F as j,b as e,T as y,g as k,r as N,u as D,C as B,a8 as w,m as F,h as M,n as b,o as O,q as S,B as z,i as E,k as H,D as Z}from"./index.187397a2.js";import{P as _}from"./PoolCurrentPosition.4ca3e172.js";import{B as $}from"./index.esm.2717e667.js";import{u as U,a as V}from"./useCoinMetadata.8b226e57.js";import{P as Y,a as f}from"./PreviewTable.24eb9e3e.js";import{N as G}from"./NavigateBackButton.93465f95.js";globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(t,o){return this.cache.has(t)?this.cache.get(t):(this.cache.set(t,o),o)}};function J({amountToRemove:t}){const{tokenReserve:o,ethReserve:l,totalLiquidity:r,poolTokensNum:n,poolTokens:s}=U(),a=t||P,c=s||P,d=g(R(C(a,c),o),r),m=g(R(C(a,c),l),r),v=T(h(Math.floor(d))),i=T(h(Math.floor(m))),p=h(n-a),x=g(p,r),A=T(h(p)),q=I(x*100,6);return{previewDAIRemoved:d,previewETHRemoved:m,nextCurrentPoolTokens:p,nextPoolShare:x,formattedPreviewDAIRemoved:v,formattedPreviewETHRemoved:i,formattedNextCurrentPoolTokens:A,formattedNextPoolShare:q}}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(t,o){return this.cache.has(t)?this.cache.get(t):(this.cache.set(t,o),o)}};const K=({amount:t})=>{const{coinMetaData:o}=V({symbol:L.name}),l=o?.pairOf?.[0],r=o?.pairOf?.[1],{formattedPreviewDAIRemoved:n,formattedPreviewETHRemoved:s,formattedNextCurrentPoolTokens:a,formattedNextPoolShare:c}=J({amountToRemove:t});return t?u(j,{children:[e("div",{className:"flex justify-center",children:e($,{size:24})}),u(Y,{title:"Expected output:",className:"my-2 mb-4",children:[e(f,{title:"DAI:",value:u("div",{className:"flex flex-1 items-center justify-end",children:[n," ",e(y,{coinFrom:r,size:14})]})}),e(f,{title:"ETH:",value:u("div",{className:"flex flex-1 items-center justify-end",children:[s," ",e(y,{coinFrom:l,size:14})]})}),e(f,{title:"Pool tokens after:",value:u("div",{className:"flex flex-1 items-center justify-end",children:[a," ",e(y,{coinFrom:l,coinTo:r,size:14})]})}),e(f,{title:"Pool share after:",value:`${c}%`})]})]}):null};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(t,o){return this.cache.has(t)?this.cache.get(t):(this.cache.set(t,o),o)}};function se(){const t=k(),[o,l]=N.exports.useState([]),r=D(),n=B.find(i=>i.assetId===w),s=F({coin:n}),a=s.amount,c=M(async()=>{if(!a)throw new Error('"amount" is required');await r.submit.remove_liquidity(1,1,Z,{forward:[a,w],variableOutputs:2,gasLimit:1e8})},{onSuccess:()=>{E.success("Liquidity removed successfully!"),s.setAmount(P),t("../"),H()},onError:i=>{E.error(i.message)}});if(!n)return null;const d=()=>{const i=[];return s.amount||i.push(`Enter ${n.name} amount`),s.hasEnoughBalance||i.push(`Insufficient ${n.name} balance`),i};N.exports.useEffect(()=>{l(d())},[s.amount,s.hasEnoughBalance]);const m=!!o.length||c.isLoading,v=()=>o.length?o[0]:c.isLoading?"Removing...":"Remove liquidity";return u(b,{children:[e(b.Title,{children:u("div",{className:"flex items-center",children:[e(G,{}),"Remove Liquidity"]})}),e("div",{className:"mt-4 mb-4",children:e(O,{autoFocus:!0,...s.getInputProps(),rightElement:e(S,{...s.getCoinSelectorProps(),isReadOnly:!0})})}),e(K,{amount:a}),e(z,{isFull:!0,size:"lg",variant:"primary",onPress:m?void 0:()=>c.mutate(),isDisabled:m,children:v()}),e("div",{className:"mt-8",children:e("h3",{className:"mb-1 mt-5 text-gray-100",children:"Your current positions"})}),e(_,{})]})}export{se as default};
