import{B as s,M as a,D as c,E as r,F as h}from"./index-9a4bc299.js";const d=1e3,g=300;class o{constructor(){this.onDisconnect=()=>{clearInterval(this._tryReconect),this._tryReconect=setInterval(()=>{console.debug("[FUEL WALLET] reconnecting!");try{this.connection=this.connect(),console.debug("[FUEL WALLET] reconnected!"),clearInterval(this._tryReconect)}catch{}},g)},this.keepAlive=()=>{try{this.connection.postMessage({target:s,type:a.ping}),setTimeout(this.keepAlive,d)}catch{this.onDisconnect()}},this.onMessageFromExtension=e=>{e.target===c&&this.postMessage(e)},this.onMessageFromWindow=e=>{const{data:n,origin:i}=Object.freeze(e);i===window.location.origin&&n.target===c&&this.connection.postMessage({...n,target:s})},this.connection=this.connect(),window.addEventListener(r,this.onMessageFromWindow),this.keepAlive()}connect(){const e=chrome.runtime.connect(chrome.runtime.id,{name:s});return e.onMessage.addListener(this.onMessageFromExtension),e.onDisconnect.addListener(this.onDisconnect),e}static start(){return new o}postMessage(e){const n={...e,target:h};window.postMessage(n,window.location.origin)}}const p="/assets/pageScript-9c91df98.js";o.start();async function l(){const t=document.createElement("script");t.src=chrome.runtime.getURL(p),t.type="module",t.onload=()=>{t.remove()},(document.head||document.documentElement).appendChild(t)}l();
