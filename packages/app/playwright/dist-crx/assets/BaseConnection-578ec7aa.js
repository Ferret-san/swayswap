import{u as o,M as n,C as r}from"./index-9a4bc299.js";class a extends o{constructor(){super(),this.onCommunicationMessage=e=>{switch(e.type){case n.response:this.onResponse(e);break;case n.request:this.onRequest(e);break;case n.event:this.onEvent(e);break;case n.uiEvent:this.onUIEvent(e);break}},this.client=new r.JSONRPCClient(this.sendRequest.bind(this)),this.server=new r.JSONRPCServer}externalMethods(e){e.forEach(s=>{let t=s;s.name&&(t=s.name),this.server.addMethod(t,this[t].bind(this))})}async sendRequest(e){throw new Error("Send request not implemented")}sendResponse(e,s){throw new Error("Send response not implemented")}onEvent(e){e.events.forEach(s=>{this.emit(s.event,...s.params)})}onResponse(e){this.client.receive(e.response)}onRequest(e){this.server.receive(e.request).then(s=>{this.sendResponse(s,e)})}onUIEvent(e){}}export{a as B};
